function createModal(){let t=document.getElementById("wind-station-modal");if(!t){t=document.createElement("div"),t.id="wind-station-modal",t.className="wind-station-modal",document.body.appendChild(t);const e=document.createElement("button");e.className="wind-station-modal-close",e.innerHTML="Ã—",e.onclick=function(){t.style.display="none"},t.appendChild(e);const i=document.createElement("div");i.className="wind-station-modal-content",t.appendChild(i),window.addEventListener("resize",(function(){if("block"===t.style.display){const e=window.innerWidth<=480;t.className=e?"wind-station-modal mobile-popup":"wind-station-modal";t.querySelectorAll("canvas").forEach((t=>{if(t&&t.chartInstance){const i=e?window.innerWidth-20:380;t.style.width=i+"px",t.style.height=(e?200:300)+"px",t.width=i,t.height=e?200:300;try{t.chartInstance.resize(),console.log("Chart resized on window resize")}catch(t){console.error("Error resizing chart:",t)}}}))}})),window.addEventListener("click",(function(e){e.target===t&&(t.style.display="none")})),window.addEventListener("keydown",(function(e){"Escape"===e.key&&"block"===t.style.display&&(t.style.display="none")}))}return t}function showModal(t){const e=createModal();e.querySelector(".wind-station-modal-content").innerHTML=t,e.style.display="block";const i=window.innerWidth<=480;e.className=i?"wind-station-modal mobile-popup":"wind-station-modal";const n=e.querySelectorAll(".tab");if(n.forEach((t=>{t.addEventListener("click",(function(){showTab(this.getAttribute("data-tab"),this)}))})),n.length>0){const t=n[0];showTab(t.getAttribute("data-tab"),t)}return e}function initializeChart(t,e){if(!t||!e||0===e.length)return;const i=t.getContext("2d");if(!i)return;const n=e.map((t=>({x:1e3*t._id,y:t["w-avg"]}))),o=e.map((t=>({x:1e3*t._id,y:t["w-max"]}))),a=new Chart(i,{type:"line",data:{datasets:[{label:"Wind Avg (km/h)",data:n,borderColor:"blue",fill:!1,pointRadius:3},{label:"Wind Max (km/h)",data:o,borderColor:"red",fill:!1,pointRadius:3}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},resizeDelay:0,layout:{padding:{left:2,right:2,top:2,bottom:5}},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1,callbacks:{title:function(t){return new Date(t[0].parsed.x).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}}}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"},tooltipFormat:"HH:mm"},grid:{drawBorder:!0,color:"rgba(0,0,0,0.1)"},ticks:{autoSkip:!0,maxRotation:0,minRotation:0,padding:5,maxTicksLimit:window.innerWidth<=480?4:8}},y:{beginAtZero:!0,grid:{drawBorder:!0,color:"rgba(0,0,0,0.1)"},ticks:{padding:5,maxTicksLimit:5}}}}});t.chartInstance=a}function showTab(t,e){const i=window.innerWidth<=480,n=document.getElementById("wind-station-modal"),o=n&&n.classList.contains("mobile-popup");if(i&&o){e&&(document.querySelectorAll(".tab").forEach((t=>{t.classList.remove("active")})),e.classList.add("active")),document.querySelectorAll(".tab-content").forEach((t=>{t.style.display="block"}));const i=document.getElementById(t);i&&i.scrollIntoView({behavior:"smooth"})}else{document.querySelectorAll(".tab-content").forEach((t=>{t.style.display="none"})),document.querySelectorAll(".tab").forEach((t=>{t.classList.remove("active")}));const i=document.getElementById(t);i&&(i.style.display="block",i.offsetHeight),e&&e.classList.add("active")}if(t.startsWith("chart-")){const e=t.split("chart-")[1],i=document.getElementById(`canvas-${e}`);if(i){i.style.display="block";const e=document.getElementById(t),n=window.innerWidth<=480;let o;o=n?window.innerWidth-20:e?e.clientWidth:400,i.style.width=o+"px",i.style.height=(n?200:300)+"px",i.width=o,i.height=n?200:300,e&&e.offsetHeight,i.chartInstance&&setTimeout((()=>{try{i.chartInstance.resize(),console.log("Chart resized successfully")}catch(t){console.error("Error resizing chart:",t)}}),100)}}}window.createWindStationModal=createModal,window.showWindStationModal=showModal,window.initializeWindStationChart=initializeChart,window.showWindStationTab=showTab;export{createModal,showModal,initializeChart,showTab};