{"version":3,"file":"js/main.b1a7e5ecd8c16fb73588.js","mappings":"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","sources":["webpack://XCmaps/webpack/runtime/chunk loaded","webpack://XCmaps/./node_modules/moment/locale/ sync ^\\.\\/.*$","webpack://XCmaps/./src/public/assets/js/L.Control.Layers.Tree.js","webpack://XCmaps/./src/public/assets/js/leaflet.responsive.popup.js","webpack://XCmaps/./src/components/InfoControl.js","webpack://XCmaps/./src/components/airspaces.js","webpack://XCmaps/./src/components/deprecated/airspaces-gliding.js","webpack://XCmaps/./src/components/deprecated/airspaces-notam.js","webpack://XCmaps/./src/components/airspaces-xc.js","webpack://XCmaps/./src/components/windstations-simple.js","webpack://XCmaps/./src/components/spots-helper.js","webpack://XCmaps/./src/components/spots-pg.js","webpack://XCmaps/./src/components/spots-hg.js","webpack://XCmaps/./src/components/spots-lz.js","webpack://XCmaps/./src/components/obstacles.js","webpack://XCmaps/./src/public/assets/js/index.js","webpack://XCmaps/webpack/bootstrap","webpack://XCmaps/webpack/runtime/define property getters","webpack://XCmaps/webpack/runtime/hasOwnProperty shorthand","webpack://XCmaps/webpack/runtime/node module decorator","webpack://XCmaps/webpack/runtime/jsonp chunk loading","webpack://XCmaps/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var map = {\n\t\"./af\": 5177,\n\t\"./af.js\": 5177,\n\t\"./ar\": 1509,\n\t\"./ar-dz\": 1488,\n\t\"./ar-dz.js\": 1488,\n\t\"./ar-kw\": 8676,\n\t\"./ar-kw.js\": 8676,\n\t\"./ar-ly\": 2353,\n\t\"./ar-ly.js\": 2353,\n\t\"./ar-ma\": 4496,\n\t\"./ar-ma.js\": 4496,\n\t\"./ar-ps\": 6947,\n\t\"./ar-ps.js\": 6947,\n\t\"./ar-sa\": 2682,\n\t\"./ar-sa.js\": 2682,\n\t\"./ar-tn\": 9756,\n\t\"./ar-tn.js\": 9756,\n\t\"./ar.js\": 1509,\n\t\"./az\": 5533,\n\t\"./az.js\": 5533,\n\t\"./be\": 8959,\n\t\"./be.js\": 8959,\n\t\"./bg\": 7777,\n\t\"./bg.js\": 7777,\n\t\"./bm\": 4903,\n\t\"./bm.js\": 4903,\n\t\"./bn\": 1290,\n\t\"./bn-bd\": 7357,\n\t\"./bn-bd.js\": 7357,\n\t\"./bn.js\": 1290,\n\t\"./bo\": 1545,\n\t\"./bo.js\": 1545,\n\t\"./br\": 1470,\n\t\"./br.js\": 1470,\n\t\"./bs\": 4429,\n\t\"./bs.js\": 4429,\n\t\"./ca\": 7306,\n\t\"./ca.js\": 7306,\n\t\"./cs\": 6464,\n\t\"./cs.js\": 6464,\n\t\"./cv\": 3635,\n\t\"./cv.js\": 3635,\n\t\"./cy\": 4226,\n\t\"./cy.js\": 4226,\n\t\"./da\": 3601,\n\t\"./da.js\": 3601,\n\t\"./de\": 7853,\n\t\"./de-at\": 6111,\n\t\"./de-at.js\": 6111,\n\t\"./de-ch\": 4697,\n\t\"./de-ch.js\": 4697,\n\t\"./de.js\": 7853,\n\t\"./dv\": 708,\n\t\"./dv.js\": 708,\n\t\"./el\": 4691,\n\t\"./el.js\": 4691,\n\t\"./en-au\": 3872,\n\t\"./en-au.js\": 3872,\n\t\"./en-ca\": 8298,\n\t\"./en-ca.js\": 8298,\n\t\"./en-gb\": 6195,\n\t\"./en-gb.js\": 6195,\n\t\"./en-ie\": 6584,\n\t\"./en-ie.js\": 6584,\n\t\"./en-il\": 5543,\n\t\"./en-il.js\": 5543,\n\t\"./en-in\": 9033,\n\t\"./en-in.js\": 9033,\n\t\"./en-nz\": 9402,\n\t\"./en-nz.js\": 9402,\n\t\"./en-sg\": 3004,\n\t\"./en-sg.js\": 3004,\n\t\"./eo\": 2934,\n\t\"./eo.js\": 2934,\n\t\"./es\": 7650,\n\t\"./es-do\": 838,\n\t\"./es-do.js\": 838,\n\t\"./es-mx\": 7730,\n\t\"./es-mx.js\": 7730,\n\t\"./es-us\": 6575,\n\t\"./es-us.js\": 6575,\n\t\"./es.js\": 7650,\n\t\"./et\": 3035,\n\t\"./et.js\": 3035,\n\t\"./eu\": 3508,\n\t\"./eu.js\": 3508,\n\t\"./fa\": 119,\n\t\"./fa.js\": 119,\n\t\"./fi\": 527,\n\t\"./fi.js\": 527,\n\t\"./fil\": 5995,\n\t\"./fil.js\": 5995,\n\t\"./fo\": 2477,\n\t\"./fo.js\": 2477,\n\t\"./fr\": 5498,\n\t\"./fr-ca\": 6435,\n\t\"./fr-ca.js\": 6435,\n\t\"./fr-ch\": 7892,\n\t\"./fr-ch.js\": 7892,\n\t\"./fr.js\": 5498,\n\t\"./fy\": 7071,\n\t\"./fy.js\": 7071,\n\t\"./ga\": 1734,\n\t\"./ga.js\": 1734,\n\t\"./gd\": 217,\n\t\"./gd.js\": 217,\n\t\"./gl\": 7329,\n\t\"./gl.js\": 7329,\n\t\"./gom-deva\": 2124,\n\t\"./gom-deva.js\": 2124,\n\t\"./gom-latn\": 3383,\n\t\"./gom-latn.js\": 3383,\n\t\"./gu\": 5050,\n\t\"./gu.js\": 5050,\n\t\"./he\": 1713,\n\t\"./he.js\": 1713,\n\t\"./hi\": 3861,\n\t\"./hi.js\": 3861,\n\t\"./hr\": 6308,\n\t\"./hr.js\": 6308,\n\t\"./hu\": 609,\n\t\"./hu.js\": 609,\n\t\"./hy-am\": 7160,\n\t\"./hy-am.js\": 7160,\n\t\"./id\": 4063,\n\t\"./id.js\": 4063,\n\t\"./is\": 9374,\n\t\"./is.js\": 9374,\n\t\"./it\": 8383,\n\t\"./it-ch\": 1827,\n\t\"./it-ch.js\": 1827,\n\t\"./it.js\": 8383,\n\t\"./ja\": 3827,\n\t\"./ja.js\": 3827,\n\t\"./jv\": 9722,\n\t\"./jv.js\": 9722,\n\t\"./ka\": 1794,\n\t\"./ka.js\": 1794,\n\t\"./kk\": 7088,\n\t\"./kk.js\": 7088,\n\t\"./km\": 6870,\n\t\"./km.js\": 6870,\n\t\"./kn\": 4451,\n\t\"./kn.js\": 4451,\n\t\"./ko\": 3164,\n\t\"./ko.js\": 3164,\n\t\"./ku\": 8174,\n\t\"./ku-kmr\": 6181,\n\t\"./ku-kmr.js\": 6181,\n\t\"./ku.js\": 8174,\n\t\"./ky\": 8474,\n\t\"./ky.js\": 8474,\n\t\"./lb\": 9680,\n\t\"./lb.js\": 9680,\n\t\"./lo\": 5867,\n\t\"./lo.js\": 5867,\n\t\"./lt\": 5766,\n\t\"./lt.js\": 5766,\n\t\"./lv\": 9532,\n\t\"./lv.js\": 9532,\n\t\"./me\": 8076,\n\t\"./me.js\": 8076,\n\t\"./mi\": 1848,\n\t\"./mi.js\": 1848,\n\t\"./mk\": 306,\n\t\"./mk.js\": 306,\n\t\"./ml\": 3739,\n\t\"./ml.js\": 3739,\n\t\"./mn\": 9053,\n\t\"./mn.js\": 9053,\n\t\"./mr\": 6169,\n\t\"./mr.js\": 6169,\n\t\"./ms\": 3386,\n\t\"./ms-my\": 2297,\n\t\"./ms-my.js\": 2297,\n\t\"./ms.js\": 3386,\n\t\"./mt\": 7075,\n\t\"./mt.js\": 7075,\n\t\"./my\": 2264,\n\t\"./my.js\": 2264,\n\t\"./nb\": 2274,\n\t\"./nb.js\": 2274,\n\t\"./ne\": 8235,\n\t\"./ne.js\": 8235,\n\t\"./nl\": 2572,\n\t\"./nl-be\": 3784,\n\t\"./nl-be.js\": 3784,\n\t\"./nl.js\": 2572,\n\t\"./nn\": 4566,\n\t\"./nn.js\": 4566,\n\t\"./oc-lnc\": 9330,\n\t\"./oc-lnc.js\": 9330,\n\t\"./pa-in\": 9849,\n\t\"./pa-in.js\": 9849,\n\t\"./pl\": 4418,\n\t\"./pl.js\": 4418,\n\t\"./pt\": 9834,\n\t\"./pt-br\": 8303,\n\t\"./pt-br.js\": 8303,\n\t\"./pt.js\": 9834,\n\t\"./ro\": 4457,\n\t\"./ro.js\": 4457,\n\t\"./ru\": 2271,\n\t\"./ru.js\": 2271,\n\t\"./sd\": 1221,\n\t\"./sd.js\": 1221,\n\t\"./se\": 3478,\n\t\"./se.js\": 3478,\n\t\"./si\": 7538,\n\t\"./si.js\": 7538,\n\t\"./sk\": 5784,\n\t\"./sk.js\": 5784,\n\t\"./sl\": 6637,\n\t\"./sl.js\": 6637,\n\t\"./sq\": 6794,\n\t\"./sq.js\": 6794,\n\t\"./sr\": 5719,\n\t\"./sr-cyrl\": 3322,\n\t\"./sr-cyrl.js\": 3322,\n\t\"./sr.js\": 5719,\n\t\"./ss\": 6000,\n\t\"./ss.js\": 6000,\n\t\"./sv\": 1011,\n\t\"./sv.js\": 1011,\n\t\"./sw\": 748,\n\t\"./sw.js\": 748,\n\t\"./ta\": 1025,\n\t\"./ta.js\": 1025,\n\t\"./te\": 1885,\n\t\"./te.js\": 1885,\n\t\"./tet\": 8861,\n\t\"./tet.js\": 8861,\n\t\"./tg\": 6571,\n\t\"./tg.js\": 6571,\n\t\"./th\": 5802,\n\t\"./th.js\": 5802,\n\t\"./tk\": 9527,\n\t\"./tk.js\": 9527,\n\t\"./tl-ph\": 9231,\n\t\"./tl-ph.js\": 9231,\n\t\"./tlh\": 1052,\n\t\"./tlh.js\": 1052,\n\t\"./tr\": 5096,\n\t\"./tr.js\": 5096,\n\t\"./tzl\": 9846,\n\t\"./tzl.js\": 9846,\n\t\"./tzm\": 1765,\n\t\"./tzm-latn\": 7711,\n\t\"./tzm-latn.js\": 7711,\n\t\"./tzm.js\": 1765,\n\t\"./ug-cn\": 8414,\n\t\"./ug-cn.js\": 8414,\n\t\"./uk\": 6618,\n\t\"./uk.js\": 6618,\n\t\"./ur\": 158,\n\t\"./ur.js\": 158,\n\t\"./uz\": 7609,\n\t\"./uz-latn\": 2475,\n\t\"./uz-latn.js\": 2475,\n\t\"./uz.js\": 7609,\n\t\"./vi\": 1135,\n\t\"./vi.js\": 1135,\n\t\"./x-pseudo\": 4051,\n\t\"./x-pseudo.js\": 4051,\n\t\"./yo\": 2218,\n\t\"./yo.js\": 2218,\n\t\"./zh-cn\": 2648,\n\t\"./zh-cn.js\": 2648,\n\t\"./zh-hk\": 1632,\n\t\"./zh-hk.js\": 1632,\n\t\"./zh-mo\": 1541,\n\t\"./zh-mo.js\": 1541,\n\t\"./zh-tw\": 304,\n\t\"./zh-tw.js\": 304\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 5358;","/*\r\n * Control like L.Control.Layers, but showing layers in a tree.\r\n * Do not forget to include the css file.\r\n */\r\nconsole.log(\"L.Control.Layers.Tree has been loaded!\");\r\n(function(L) {\r\n    if (typeof L === 'undefined') {\r\n        throw new Error('Leaflet must be included first');\r\n    }\r\n\r\n    /*\r\n     * L.Control.Layers.Tree extends L.Control.Layers because it reuses\r\n     * most of its functionality. Only the HTML creation is different.\r\n     */\r\n    L.Control.Layers.Tree = L.Control.Layers.extend({\r\n        options: {\r\n            closedSymbol: '+',\r\n            openedSymbol: '&minus;',\r\n            spaceSymbol: ' ',\r\n            selectorBack: false,\r\n            namedToggle: false,\r\n            collapseAll: '',\r\n            expandAll: '',\r\n            labelIsSelector: 'both',\r\n        },\r\n\r\n        // Class names are error prone texts, so write them once here\r\n        _initClassesNames: function() {\r\n            this.cls = {\r\n                children: 'leaflet-layerstree-children',\r\n                childrenNopad: 'leaflet-layerstree-children-nopad',\r\n                hide: 'leaflet-layerstree-hide',\r\n                closed: 'leaflet-layerstree-closed',\r\n                opened: 'leaflet-layerstree-opened',\r\n                space: 'leaflet-layerstree-header-space',\r\n                pointer: 'leaflet-layerstree-header-pointer',\r\n                header: 'leaflet-layerstree-header',\r\n                neverShow: 'leaflet-layerstree-nevershow',\r\n                node: 'leaflet-layerstree-node',\r\n                name: 'leaflet-layerstree-header-name',\r\n                label: 'leaflet-layerstree-header-label',\r\n                selAllCheckbox: 'leaflet-layerstree-sel-all-checkbox',\r\n            };\r\n        },\r\n\r\n        initialize: function(baseTree, overlaysTree, options) {\r\n            this._scrollTop = 0;\r\n            this._initClassesNames();\r\n            this._baseTree = null;\r\n            this._overlaysTree = null;\r\n            L.Util.setOptions(this, options);\r\n            L.Control.Layers.prototype.initialize.call(this, null, null, options);\r\n            this._setTrees(baseTree, overlaysTree);\r\n        },\r\n\r\n        setBaseTree: function(tree) {\r\n            return this._setTrees(tree);\r\n        },\r\n\r\n        setOverlayTree: function(tree) {\r\n            return this._setTrees(undefined, tree);\r\n        },\r\n\r\n        addBaseLayer: function(_layer, _name) {\r\n            throw 'addBaseLayer is disabled';\r\n        },\r\n\r\n        addOverlay: function(_layer, _name) {\r\n            throw 'addOverlay is disabled';\r\n        },\r\n\r\n        removeLayer: function(_layer) {\r\n            throw 'removeLayer is disabled';\r\n        },\r\n\r\n        collapse: function() {\r\n            this._scrollTop = this._sect().scrollTop;\r\n            return L.Control.Layers.prototype.collapse.call(this);\r\n        },\r\n\r\n        expand: function() {\r\n            L.Control.Layers.prototype.expand.call(this);\r\n            this._sect().scrollTop = this._scrollTop;\r\n        },\r\n\r\n        onAdd: function(map) {\r\n            function changeName(layer) {\r\n                if (layer._layersTreeName) {\r\n                    toggle.innerHTML = layer._layersTreeName;\r\n                }\r\n            }\r\n\r\n            var ret = L.Control.Layers.prototype.onAdd.call(this, map);\r\n            if (this.options.namedToggle) {\r\n                var toggle = this._container.getElementsByClassName('leaflet-control-layers-toggle')[0];\r\n                L.DomUtil.addClass(toggle, 'leaflet-layerstree-named-toggle');\r\n                // Start with this value...\r\n                map.eachLayer(function(layer) {changeName(layer);});\r\n                // ... and change it whenever the baselayer is changed.\r\n                map.on('baselayerchange', function(e) {changeName(e.layer);}, this);\r\n            }\r\n            return ret;\r\n        },\r\n\r\n        // Expands the whole tree (base other overlays)\r\n        expandTree: function(overlay) {\r\n            var container = overlay ? this._overlaysList : this._baseLayersList;\r\n            if (container) {\r\n                this._applyOnTree(container, false);\r\n            }\r\n            return this._localExpand();\r\n        },\r\n\r\n        // Collapses the whole tree (base other overlays)\r\n        collapseTree: function(overlay) {\r\n            var container = overlay ? this._overlaysList : this._baseLayersList;\r\n            if (container) {\r\n                this._applyOnTree(container, true);\r\n            }\r\n            return this._localExpand();\r\n        },\r\n\r\n        // Expands the tree, only to show the selected inputs\r\n        expandSelected: function(overlay) {\r\n            function iter(el) {\r\n                // Function to iterate the whole DOM upwards\r\n                var p = el.parentElement;\r\n                if (p) {\r\n                    if (L.DomUtil.hasClass(p, that.cls.children) &&\r\n                        !L.DomUtil.hasClass(el, that.cls.childrenNopad)) {\r\n                        L.DomUtil.removeClass(p, hide);\r\n                    }\r\n\r\n                    if (L.DomUtil.hasClass(p, that.cls.node)) {\r\n                        var h = p.getElementsByClassName(that.cls.header)[0];\r\n                        that._applyOnTree(h, false);\r\n                    }\r\n                    iter(p);\r\n                }\r\n            }\r\n\r\n            var that = this;\r\n            var container = overlay ? this._overlaysList : this._baseLayersList;\r\n            if (!container) return this;\r\n            var hide = this.cls.hide;\r\n            var inputs = this._layerControlInputs || container.getElementsByTagName('input');\r\n            for (var i = 0; i < inputs.length; i++) {\r\n                // Loop over every (valid) input.\r\n                var input = inputs[i];\r\n                if (this._getLayer && !!this._getLayer(input.layerId).overlay != !!overlay) continue;\r\n                if (input.checked) {\r\n                    // Get out of the header,\r\n                    // to not open the possible (but rare) children\r\n                    iter(input.parentElement.parentElement.parentElement.parentElement);\r\n                }\r\n            }\r\n            return this._localExpand();\r\n        },\r\n\r\n        // \"private\" methods, not exposed in the API\r\n        _sect: function() {\r\n            // to keep compatibility after 1.3 https://github.com/Leaflet/Leaflet/pull/6380\r\n            return this._section || this._form;\r\n        },\r\n\r\n        _setTrees: function(base, overlays) {\r\n            var id = 0; // to keep unique id\r\n            function iterate(tree, output, overlays) {\r\n                if (tree && tree.layer) {\r\n                    if (!overlays) {\r\n                        tree.layer._layersTreeName = tree.name || tree.label;\r\n                    }\r\n                    output[id++] = tree.layer;\r\n                }\r\n                if (tree && tree.children && tree.children.length) {\r\n                    tree.children.forEach(function(child) {\r\n                        iterate(child, output, overlays);\r\n                    });\r\n                }\r\n                return output;\r\n            }\r\n\r\n            // We accept arrays, but convert into an object with children\r\n            function forArrays(input) {\r\n                if (Array.isArray(input)) {\r\n                    return {noShow: true, children: input};\r\n                } else {\r\n                    return input;\r\n                }\r\n            }\r\n\r\n            // Clean everything, and start again.\r\n            if (this._layerControlInputs) {\r\n                this._layerControlInputs = [];\r\n            }\r\n            for (var i = 0; i < this._layers.length; ++i) {\r\n                this._layers[i].layer.off('add remove', this._onLayerChange, this);\r\n            }\r\n            this._layers = [];\r\n\r\n            if (base !== undefined) this._baseTree = forArrays(base);\r\n            if (overlays !== undefined) this._overlaysTree = forArrays(overlays);\r\n\r\n            var bflat = iterate(this._baseTree, {});\r\n            for (var j in bflat) {\r\n                this._addLayer(bflat[j], j);\r\n            }\r\n\r\n            var oflat = iterate(this._overlaysTree, {}, true);\r\n            for (var k in oflat) {\r\n                this._addLayer(oflat[k], k, true);\r\n            }\r\n            return (this._map) ? this._update() : this;\r\n        },\r\n\r\n        // Used to update the vertical scrollbar\r\n        _localExpand: function() {\r\n            if (this._map && L.DomUtil.hasClass(this._container, 'leaflet-control-layers-expanded')) {\r\n                var top = this._sect().scrollTop;\r\n                this.expand();\r\n                this._sect().scrollTop = top; // to keep the scroll location\r\n                this._scrollTop = top;\r\n            }\r\n            return this;\r\n        },\r\n\r\n        // collapses or expands the tree in the container.\r\n        _applyOnTree: function(container, collapse) {\r\n            var iters = [\r\n                {cls: this.cls.children, hide: collapse},\r\n                {cls: this.cls.opened, hide: collapse},\r\n                {cls: this.cls.closed, hide: !collapse},\r\n            ];\r\n            iters.forEach(function(it) {\r\n                var els = container.getElementsByClassName(it.cls);\r\n                for (var i = 0; i < els.length; i++) {\r\n                    var el = els[i];\r\n                    if (L.DomUtil.hasClass(el, this.cls.childrenNopad)) {\r\n                        // do nothing\r\n                    } else if (it.hide) {\r\n                        L.DomUtil.addClass(el, this.cls.hide);\r\n                    } else {\r\n                        L.DomUtil.removeClass(el, this.cls.hide);\r\n                    }\r\n                }\r\n            }, this);\r\n        },\r\n\r\n        // it is called in the original _update, and shouldn't do anything.\r\n        _addItem: function(_obj) {\r\n        },\r\n\r\n        // overwrite _update function in Control.Layers\r\n        _update: function() {\r\n            if (!this._container) { return this; }\r\n            L.Control.Layers.prototype._update.call(this);\r\n            this._addTreeLayout(this._baseTree, false);\r\n            this._addTreeLayout(this._overlaysTree, true);\r\n            return this._localExpand();\r\n        },\r\n\r\n        // Create the DOM objects for the tree\r\n        _addTreeLayout: function(tree, overlay) {\r\n            if (!tree) return;\r\n            var container = overlay ? this._overlaysList : this._baseLayersList;\r\n            this._expandCollapseAll(overlay, this.options.collapseAll, this.collapseTree);\r\n            this._expandCollapseAll(overlay, this.options.expandAll, this.expandTree);\r\n            this._iterateTreeLayout(tree, container, overlay, [], tree.noShow);\r\n            if (this._checkDisabledLayers) {\r\n                // to keep compatibility\r\n                this._checkDisabledLayers();\r\n            }\r\n        },\r\n\r\n        // Create the \"Collapse all\" or expand, if needed.\r\n        _expandCollapseAll: function(overlay, text, fn, ctx) {\r\n            var container = overlay ? this._overlaysList : this._baseLayersList;\r\n            ctx = ctx ? ctx : this;\r\n            if (text) {\r\n                var o = document.createElement('div');\r\n                o.className = 'leaflet-layerstree-expand-collapse';\r\n                container.appendChild(o);\r\n                o.innerHTML = text;\r\n                o.tabIndex = 0;\r\n                L.DomEvent.on(o, 'click keydown', function(e) {\r\n                    if (e.type !== 'keydown' || e.keyCode === 32) {\r\n                        o.blur();\r\n                        fn.call(ctx, overlay);\r\n                        this._localExpand();\r\n                    }\r\n                }, this);\r\n            }\r\n        },\r\n\r\n        // recursive function to create the DOM children\r\n        _iterateTreeLayout: function(tree, container, overlay, selAllNodes, noShow) {\r\n            if (!tree) return;\r\n            function creator(type, cls, append, innerHTML) {\r\n                var obj = L.DomUtil.create(type, cls, append);\r\n                if (innerHTML) obj.innerHTML = innerHTML;\r\n                return obj;\r\n            }\r\n\r\n            // Add this block to handle HTML elements\r\n            if (tree.html) {\r\n                var htmlContainer = creator('div', 'leaflet-layerstree-html-container', container);\r\n                htmlContainer.innerHTML = tree.html;\r\n                return;  // Skip normal processing for HTML nodes\r\n            }\r\n\r\n            // create the header with it fields\r\n            var header = creator('div', this.cls.header, container);\r\n            var sel = creator('span');\r\n            var entry = creator('span');\r\n            var closed = creator('span', this.cls.closed, sel, this.options.closedSymbol);\r\n            var opened = creator('span', this.cls.opened, sel, this.options.openedSymbol);\r\n            var space = creator('span', this.cls.space, null, this.options.spaceSymbol);\r\n            if (this.options.selectorBack) {\r\n                sel.insertBefore(space, closed);\r\n                header.appendChild(entry);\r\n                header.appendChild(sel);\r\n            } else {\r\n                sel.appendChild(space);\r\n                header.appendChild(sel);\r\n                header.appendChild(entry);\r\n            }\r\n\r\n            function updateSelAllCheckbox(ancestor) {\r\n                var selector = ancestor.querySelector('input[type=checkbox]');\r\n                var selectedAll = true;\r\n                var selectedNone = true;\r\n                var inputs = ancestor.querySelectorAll('input[type=checkbox]');\r\n                [].forEach.call(inputs, function(inp) { // to work in node for tests\r\n                    if (inp === selector) {\r\n                        // ignore\r\n                    } else if (inp.indeterminate) {\r\n                        selectedAll = false;\r\n                        selectedNone = false;\r\n                    } else if (inp.checked) {\r\n                        selectedNone = false;\r\n                    } else if (!inp.checked) {\r\n                        selectedAll = false;\r\n                    }\r\n                });\r\n                if (selectedAll) {\r\n                    selector.indeterminate = false;\r\n                    selector.checked = true;\r\n                } else if (selectedNone) {\r\n                    selector.indeterminate = false;\r\n                    selector.checked = false;\r\n                } else {\r\n                    selector.indeterminate = true;\r\n                    selector.checked = false;\r\n                }\r\n            }\r\n\r\n            function manageSelectorsAll(input, ctx) {\r\n                selAllNodes.forEach(function(ancestor) {\r\n                    L.DomEvent.on(input, 'click', function(_ev) {\r\n                        updateSelAllCheckbox(ancestor);\r\n                    }, ctx);\r\n                }, ctx);\r\n            }\r\n\r\n            var selAll;\r\n            if (tree.selectAllCheckbox) {\r\n                selAll = this._createCheckboxElement(false);\r\n                selAll.className += ' ' + this.cls.selAllCheckbox;\r\n            }\r\n\r\n            var hide = this.cls.hide; // To toggle state\r\n            // create the children group, with the header event click\r\n            if (tree.children) {\r\n                var children = creator('div', this.cls.children, container);\r\n                var sensible = tree.layer ? sel : header;\r\n                L.DomUtil.addClass(sensible, this.cls.pointer);\r\n                sensible.tabIndex = 0;\r\n                L.DomEvent.on(sensible, 'click keydown', function(e) {\r\n                    // leaflet internal flag to prevent click propagation and collapsing tree on mobile browsers\r\n                    if (this._preventClick) {\r\n                        return;\r\n                    }\r\n                    if (e.type === 'keydown' && e.keyCode !== 32) {\r\n                        return;\r\n                    }\r\n                    sensible.blur();\r\n\r\n                    if (L.DomUtil.hasClass(opened, hide)) {\r\n                        // it is not opened, so open it\r\n                        L.DomUtil.addClass(closed, hide);\r\n                        L.DomUtil.removeClass(opened, hide);\r\n                        L.DomUtil.removeClass(children, hide);\r\n                    } else {\r\n                        // close it\r\n                        L.DomUtil.removeClass(closed, hide);\r\n                        L.DomUtil.addClass(opened, hide);\r\n                        L.DomUtil.addClass(children, hide);\r\n                    }\r\n                    this._localExpand();\r\n                }, this);\r\n                if (selAll) {\r\n                    selAllNodes.splice(0, 0, container);\r\n                }\r\n                tree.children.forEach(function(child) {\r\n                    var node = creator('div', this.cls.node, children);\r\n                    this._iterateTreeLayout(child, node, overlay, selAllNodes);\r\n                }, this);\r\n                if (selAll) {\r\n                    selAllNodes.splice(0, 1);\r\n                }\r\n            } else {\r\n                // no children, so the selector makes no sense.\r\n                L.DomUtil.addClass(sel, this.cls.neverShow);\r\n            }\r\n\r\n            // make (or not) the label clickable to toggle the layer\r\n            var labelType;\r\n            if (tree.layer) {\r\n                if ((this.options.labelIsSelector === 'both') || // if option is set to both\r\n                    (overlay && this.options.labelIsSelector === 'overlay') || // if an overlay layer and options is set to overlay\r\n                    (!overlay && this.options.labelIsSelector === 'base')) { // if a base layer and option is set to base\r\n                    labelType = 'label';\r\n                } else { // if option is set to something else\r\n                    labelType = 'span';\r\n                }\r\n            } else {\r\n                labelType = 'span';\r\n            }\r\n            // create the input and label\r\n            var label = creator(labelType, this.cls.label, entry);\r\n            if (tree.layer) {\r\n                // now create the element like in _addItem\r\n                var checked = this._map.hasLayer(tree.layer);\r\n                var input;\r\n                var radioGroup = overlay ? tree.radioGroup : 'leaflet-base-layers_' + L.Util.stamp(this);\r\n                if (radioGroup) {\r\n                    input = this._createRadioElement(radioGroup, checked);\r\n                } else {\r\n                    input = this._createCheckboxElement(checked);\r\n                    manageSelectorsAll(input, this);\r\n                }\r\n                if (this._layerControlInputs) {\r\n                    // to keep compatibility with 1.0.3\r\n                    this._layerControlInputs.push(input);\r\n                }\r\n                input.layerId = L.Util.stamp(tree.layer);\r\n                L.DomEvent.on(input, 'click', this._onInputClick, this);\r\n                label.appendChild(input);\r\n            }\r\n\r\n            function isText(variable) {\r\n                return (typeof variable === 'string' || variable instanceof String);\r\n            }\r\n\r\n            function isFunction(functionToCheck) {\r\n                return functionToCheck && {}.toString.call(functionToCheck) === '[object Function]';\r\n            }\r\n\r\n            function selectAllCheckboxes(select, ctx) {\r\n                var inputs = container.getElementsByTagName('input');\r\n                for (var i = 0; i < inputs.length; i++) {\r\n                    var input = inputs[i];\r\n                    if (input.type !== 'checkbox') continue;\r\n                    input.checked = select;\r\n                    input.indeterminate = false;\r\n                }\r\n                ctx._onInputClick();\r\n            }\r\n            if (tree.selectAllCheckbox) {\r\n                // selAll is already created\r\n                label.appendChild(selAll);\r\n                if (isText(tree.selectAllCheckbox)) {\r\n                    selAll.title = tree.selectAllCheckbox;\r\n                }\r\n                L.DomEvent.on(selAll, 'click', function(ev) {\r\n                    ev.stopPropagation();\r\n                    selectAllCheckboxes(selAll.checked, this);\r\n                }, this);\r\n                updateSelAllCheckbox(container);\r\n                manageSelectorsAll(selAll, this);\r\n            }\r\n\r\n            creator('span', this.cls.name, label, tree.label);\r\n\r\n            // hide the button which doesn't fit the collapsed state, then hide children conditionally\r\n            L.DomUtil.addClass(tree.collapsed ? opened : closed, hide);\r\n            tree.collapsed && children && L.DomUtil.addClass(children, hide);\r\n\r\n            if (noShow) {\r\n                L.DomUtil.addClass(header, this.cls.neverShow);\r\n                L.DomUtil.addClass(children, this.cls.childrenNopad);\r\n            }\r\n\r\n            var eventeds = tree.eventedClasses;\r\n            if (!(eventeds instanceof Array)) {\r\n                eventeds = [eventeds];\r\n            }\r\n\r\n            for (var e = 0; e < eventeds.length; e++) {\r\n                var evented = eventeds[e];\r\n                if (evented && evented.className) {\r\n                    var obj = container.querySelector('.' + evented.className);\r\n                    if (obj) {\r\n                        L.DomEvent.on(obj, evented.event || 'click', (function(selectAll) {\r\n                            return function(ev) {\r\n                                ev.stopPropagation();\r\n                                var select = isFunction(selectAll) ? selectAll(ev, container, tree, this._map) : selectAll;\r\n                                if (select !== undefined && select !== null) {\r\n                                    selectAllCheckboxes(select, this);\r\n                                }\r\n                            };\r\n                        })(evented.selectAll), this);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        _createCheckboxElement: function(checked) {\r\n            var input = document.createElement('input');\r\n            input.type = 'checkbox';\r\n            input.className = 'leaflet-control-layers-selector';\r\n            input.defaultChecked = checked;\r\n            return input;\r\n        },\r\n\r\n    });\r\n\r\n    L.control.layers.tree = function(base, overlays, options) {\r\n        return new L.Control.Layers.Tree(base, overlays, options);\r\n    };\r\n \r\n})(L);\r\nconsole.log(\"L.Control.Layers.Tree has been loaded!\");\r\n","/*\r\n leaflet.responsive.popup 1.0.0\r\n (c) 20222 https://github.com/yafred\r\n*/\r\n\r\nL.ResponsivePopup = L.Popup.extend({\r\n\t\t\r\n\toptions: {\r\n\t\thasTip: true\r\n\t\t/*\r\n\t\t * Inherited from L.Popup\r\n\t\t * \r\n\t\t * - offset\r\n\t\t * \r\n\t\t * - autoPanPadding\r\n\t\t * - autoPanPaddingTopLeft\r\n\t\t * - autoPanPaddingBottomRight\r\n\t\t */\r\n\t},\r\n\t\r\n\t/**\r\n\t * Overrides https://github.com/Leaflet/Leaflet/blob/399ed2105220f10b79e69b57420597e03502e611/src/layer/Popup.js#L183\r\n\t * This is to add hasTip option\r\n\t */\r\n\t_initLayout: function () {\r\n\r\n\t\tvar prefix = 'leaflet-popup',\r\n\t\t    container = this._container = L.DomUtil.create('div',\r\n\t\t\tprefix + ' ' + (this.options.className || '') +\r\n\t\t\t' leaflet-zoom-animated');\r\n\r\n\t\tvar wrapper = this._wrapper = L.DomUtil.create('div', prefix + '-content-wrapper', container);\r\n\t\tthis._contentNode = L.DomUtil.create('div', prefix + '-content', wrapper);\r\n\r\n\t\tL.DomEvent.disableClickPropagation(container);\r\n\t\tL.DomEvent.disableScrollPropagation(this._contentNode);\r\n\t\tL.DomEvent.on(container, 'contextmenu', L.DomEvent.stopPropagation);\r\n\r\n\t\tthis._tipContainer = L.DomUtil.create('div', prefix + '-tip-container', container);\r\n\t\tif(!this.options.hasTip) {\r\n\t\t\tthis._tipContainer.style.visibility = 'hidden';\r\n\t\t}\r\n\t\tthis._tip = L.DomUtil.create('div', prefix + '-tip', this._tipContainer);\r\n\r\n\t\tif (this.options.closeButton) {\r\n\t\t\tvar closeButton = this._closeButton = L.DomUtil.create('a', prefix + '-close-button', container);\r\n\t\t\tcloseButton.setAttribute('role', 'button'); // overrides the implicit role=link of <a> elements #7399\r\n\t\t\tcloseButton.setAttribute('aria-label', 'Close popup');\r\n\t\t\tcloseButton.href = '#close';\r\n\t\t\tcloseButton.innerHTML = '<span aria-hidden=\"true\">&#215;</span>';\r\n\r\n\t\t\tL.DomEvent.on(closeButton, 'click', function (ev) {\r\n\t\t\t\tL.DomEvent.preventDefault(ev);\r\n\t\t\t\tthis.close();\r\n\t\t\t}, this);\r\n\t\t}\r\n\t},\r\n\t\r\n\t\r\n\t\r\n\t/**\r\n\t * Overrides https://github.com/Leaflet/Leaflet/blob/v1.3.4/src/layer/DivOverlay.js#L178\r\n\t */\r\n\t_updatePosition: function () {\r\n\r\n\t\tif (!this._map) { return; }\r\n\t\t\r\n\t\tvar pos = this._map.latLngToLayerPoint(this._latlng),\r\n\t        basePoint = this._map.layerPointToContainerPoint(pos),\r\n\t        containerWidth = this._container.offsetWidth,\r\n\t        containerHeight = this._container.offsetHeight,\r\n\t\t    padding = L.point(this.options.autoPanPadding),\r\n\t\t    paddingTL = L.point(this.options.autoPanPaddingTopLeft || padding),\r\n\t\t    paddingBR = L.point(this.options.autoPanPaddingBottomRight || padding),\r\n\t        mapSize = this._map.getSize(),\r\n\t        anchor = this._getAnchor(),  // popup anchor\r\n        \toffset = L.point(this.options.offset); // offset relative to anchor (option from L.DivOverlay. We only use absolute values).\r\n  \r\n\t\t// Leaflet default dimensions (should not be hard coded in the future)\r\n  \t\tvar tipHeight = 11; //px\r\n  \t\tvar tipWidth = 22; //px\r\n  \t\tvar containerRadius = 12; //px  \r\n\t\t\r\n  \t\t// Tweak offset to include tip dimensions \r\n  \t\tvar offsetX = Math.abs(offset.x);\r\n   \t\tvar offsetY = Math.abs(offset.y);\r\n   \t\tif(this.options.hasTip) {\r\n  \t\t\toffsetX += tipHeight;\r\n  \t\t\toffsetY += tipHeight;  \r\n  \t\t\t\r\n  \t\t\t// clear CSS\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-north');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-south');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-east');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-west');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-north-east');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-north-west');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-south-east');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-south-west');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-east-north');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-east-south');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-west-north');\t\t\r\n  \t\t\tL.DomUtil.removeClass(this._container, 'leaflet-resp-popup-west-south');\r\n  \t\t\t// this._container.style.display = 'initial'; // this does not work\r\n  \t\t}\r\n\t\t\r\n\t\t// Where can we fit the popup ?\r\n\t\tvar canGoTop = true,\r\n\t\t    canGoBottom = true,\r\n\t\t    canGoLeft = true,\r\n\t\t    canGoRight = true,\r\n\t\t    containerPos = false;\r\n\t\t\r\n\t\tif(basePoint.y + anchor.y - offsetY - containerHeight - Math.abs(paddingTL.y) < 0) {\r\n\t\t\tcanGoTop = false;\r\n\t\t}\r\n\t\tif(basePoint.y + anchor.y + offsetY + containerHeight + Math.abs(paddingBR.y) > mapSize.y) {\r\n\t\t\tcanGoBottom = false;\r\n\t\t}\r\n\t\tif(basePoint.x + anchor.x - offsetX - containerWidth - Math.abs(paddingTL.x) < 0) {\r\n\t\t\tcanGoLeft = false;\r\n\t\t}\r\n\t\tif(basePoint.x + anchor.x + offsetX + containerWidth + Math.abs(paddingBR.x) > mapSize.x) {\r\n\t\t\tcanGoRight = false;\r\n\t\t}\r\n\t\t\r\n\t\t// manage overflows\r\n\t\tvar subtractX = containerWidth / 2 - anchor.x,\r\n\t\t    subtractY = containerHeight / 2 - anchor.y;\r\n\t\t\r\n\t\tif(canGoTop || canGoBottom) {\t\t\r\n\t\t\tvar containerLeft = basePoint.x + anchor.x - (containerWidth / 2);\r\n\t\t\tvar containerRight = basePoint.x + anchor.x + (containerWidth / 2);\r\n\t\t\tif(containerLeft < Math.abs(paddingTL.x)) { // left overflow\r\n\t\t\t\tsubtractX = containerWidth / 2 - anchor.x - Math.abs(paddingTL.x) + containerLeft;\r\n\t\t\t}\t\t\r\n\t\t\tif(containerRight > mapSize.x - Math.abs(paddingBR.x)) { // right overflow\r\n\t\t\t\tsubtractX = containerWidth / 2 - anchor.x + containerRight - mapSize.x + Math.abs(paddingBR.x);\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t}\t\r\n\t\tif(canGoLeft || canGoRight) {\r\n\t\t\tvar containerTop = basePoint.y + anchor.y - (containerHeight / 2);\r\n\t\t\tvar containerBottom = basePoint.y + anchor.y + (containerHeight / 2);\r\n\t\t\tif(containerTop < Math.abs(paddingTL.y)) { // top overflow\r\n\t\t\t\tsubtractY = containerHeight / 2 - anchor.y - Math.abs(paddingTL.y) + containerTop;\r\n\t\t\t}\t\t\r\n\t\t\tif(containerBottom > mapSize.y - Math.abs(paddingBR.y)) { // bottom overflow\r\n\t\t\t\tsubtractY = containerHeight / 2 - anchor.y + containerBottom - mapSize.y + Math.abs(paddingBR.y);\r\n\t\t\t}\t\t\t\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t// position the popup (order of preference is: top, left, bottom, right, centerOnMap)\r\n\t\tif(canGoTop) {\r\n\t\t\tcontainerPos = pos.subtract(L.point(subtractX, -anchor.y + containerHeight + offsetY, true));\r\n\t\t\tif(this.options.hasTip) {\r\n\t\t\t\tif(basePoint.x + anchor.x < paddingTL.x + containerRadius + tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.x = pos.x + anchor.x;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-north-east');\r\n\t\t\t\t\tthis._tipContainer.style.top = containerHeight + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = '0px';\r\n\t\t\t\t}\r\n\t\t\t\telse if(basePoint.x + anchor.x > mapSize.x - paddingBR.x - containerRadius - tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.x = pos.x + anchor.x - containerWidth;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-north-west');\t\r\n\t\t\t\t\tthis._tipContainer.style.top = containerHeight + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = containerWidth + 'px';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-north');\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = containerHeight + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = (pos.x + anchor.x - containerPos.x) + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(canGoLeft) {\r\n\t\t\tcontainerPos = pos.subtract(L.point(-anchor.x + containerWidth + offsetX, subtractY, true));\r\n\t\t\tif(this.options.hasTip) {\r\n\t\t\t\tif(basePoint.y + anchor.y < paddingTL.y + containerRadius + tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.y = pos.y + anchor.y;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-west-south');\r\n\t\t\t\t\tthis._tipContainer.style.top = '0px';\r\n\t\t\t\t\tthis._tipContainer.style.left = containerWidth + 'px';\r\n\t\t\t\t}\r\n\t\t\t\telse if(basePoint.y + anchor.y > mapSize.y - paddingBR.y - containerRadius - tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.y = pos.y + anchor.y - containerHeight;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-west-north');\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = containerHeight + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = containerWidth + 'px';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-west');\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = (pos.y + anchor.y - containerPos.y) + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = containerWidth + 'px';\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(canGoBottom) {\r\n\t\t\tcontainerPos = pos.subtract(L.point(subtractX, -anchor.y - offsetY, true));\r\n\t\t\tif(this.options.hasTip) {\r\n\t\t\t\tif(basePoint.x + anchor.x < paddingTL.x + containerRadius + tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.x = pos.x + anchor.x;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-south-east');\r\n\t\t\t\t\tthis._tipContainer.style.top = '0px';\r\n\t\t\t\t\tthis._tipContainer.style.left = '0px';\r\n\t\t\t\t}\r\n\t\t\t\telse if(basePoint.x + anchor.x > mapSize.x - paddingBR.x - containerRadius - tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.x = pos.x + anchor.x - containerWidth;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-south-west');\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = '0px';\r\n\t\t\t\t\tthis._tipContainer.style.left = containerWidth + 'px';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-south');\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = '0px';\r\n\t\t\t\t\tthis._tipContainer.style.left = (pos.x + anchor.x - containerPos.x) + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if(canGoRight) {\r\n\t\t\tcontainerPos = pos.subtract(L.point(-anchor.x - offsetX, subtractY, true));\r\n\t\t\tif(this.options.hasTip) {\r\n\t\t\t\tif(basePoint.y + anchor.y < paddingTL.y + containerRadius + tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.y = pos.y + anchor.y;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-east-south');\r\n\t\t\t\t\tthis._tipContainer.style.top = '0px';\r\n\t\t\t\t\tthis._tipContainer.style.left = '0px';\r\n\t\t\t\t}\r\n\t\t\t\telse if(basePoint.y + anchor.y > mapSize.y - paddingBR.y - containerRadius - tipWidth/2) {\r\n\t\t\t\t\tcontainerPos.y = pos.y + anchor.y - containerHeight;\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-east-north');\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = containerHeight + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = '0px';\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tL.DomUtil.addClass(this._container, 'leaflet-resp-popup-east');\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tthis._tipContainer.style.top = (pos.y + anchor.y - containerPos.y) + 'px';\r\n\t\t\t\t\tthis._tipContainer.style.left = '0px';\r\n\t\t\t\t}\t\t\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar pos = this._map.latLngToLayerPoint(this._map.getCenter());\r\n\t\t\tcontainerPos = pos.subtract(L.point(containerWidth / 2, containerHeight / 2));\r\n\t\t\tif(this.options.hasTip) {\r\n\t\t\t\t// this._tipContainer.style.display = 'none'; // this does not work\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\t\r\n\t\t// if point is not visible, just hide the popup\r\n\t\tif(basePoint.x < 0 || basePoint.y < 0 || basePoint.x > mapSize.x || basePoint.y > mapSize.y) {\r\n\t\t\t// this._container.style.display = 'none';  // this does not work\r\n\t\t}\r\n\t\t\r\n\t\t// if container is too big, just hide the popup\r\n\t\tif(containerWidth - Math.abs(paddingTL.x) - Math.abs(paddingBR.x) > mapSize.x || containerHeight - Math.abs(paddingTL.y) - Math.abs(paddingBR.y) > mapSize.y) {\r\n\t\t\t// this._container.style.display = 'none'; // this does not work\r\n\t\t}\r\n\t\t\r\n\t\tL.DomUtil.setPosition(this._container, containerPos);\r\n\t}\r\n\t\r\n});\r\n\r\n\r\n//Instantiates a `ResponsivePopup` object given an optional `options` object that describes its appearance and location and an optional `source` object that is used to tag the popup with a reference to the Layer to which it refers.\r\nL.responsivePopup = function (options, source) {\r\n\treturn new L.ResponsivePopup(options, source);\r\n};\r\n\r\n//Adds Angular support\r\nif( typeof exports === 'object' && typeof module !== 'undefined') {\r\n\texports.responsivePopup = L.responsivePopup;\r\n\texports.ResponsivePopup = L.ResponsivePopup;\r\n}","const L = window.L;\r\n\r\nconst InfoControl = L.Control.extend({\r\n    onAdd: function(map) {\r\n        var container = L.DomUtil.create('div', 'info-control leaflet-bar leaflet-control');\r\n        var link = L.DomUtil.create('a', 'leaflet-control-button', container);\r\n        link.href = '#';\r\n        var img = L.DomUtil.create('img', 'info-control-icon', link);\r\n        img.src = 'assets/images/info.png';\r\n        img.alt = 'Information';\r\n        img.style.width = '24px';\r\n        img.style.height = '24px';\r\n        img.style.padding = '4px';\r\n\r\n        L.DomEvent.disableClickPropagation(container);\r\n        L.DomEvent.on(link, 'click', function(e) {\r\n            L.DomEvent.stop(e);\r\n            var popupContent = '<div style=\"padding: 10px; max-width: 800px;\"><h3><img src=\"/assets/images/XCmapsLogo.png\" alt=\"XCmaps\"></h3>' +\r\n                '<p>You can contact us by email, or report any issue on github.</p>'+\r\n                '<p><strong>Credits:</strong></p>' +\r\n                '<ul>' +\r\n                '<li>Terrain tiles by <a href=\"https://www.jawg.io\" target=\"_blank\">Jawg</a></li>' +\r\n                '<li>OpenStreetMap</li>' +\r\n                '<li>XContest terrain data</li>' +\r\n                '<li>MapTiler for GL layer</li>' +\r\n                '<li>Airspaces: Airspaces are imported from openaip:\"OpenAIP data is not certified and must not be used for primary navigation or flight planning. Never rely on openAIP data! OpenAIP data contains errors. Using openAIP data may result in serious injury or death.\"</li>' +\r\n                '<li>Wind Stations: based on <a href=\"https://github.com/winds-mobi/\" target=\"_blank\">winds.mobi</a> by Yann Savary and additional data sources</li>' +\r\n                '<li>Spots: © <a href=\"https://paraglidingspots.com\" target=\"_blank\">paraglidingspots.com</a> by Karsten Ehlers</li>' +\r\n                '<li>and many more open source libraries, projects, and artwork</li>' +\r\n                '</ul>' +\r\n                '<p>This map combines various data sources for aerial sports navigation.</p></div>';\r\n            \r\n            L.popup({ className: 'info-popup', autoPan: true })\r\n                .setLatLng(map.getCenter())\r\n                .setContent(popupContent)\r\n                .openOn(map);\r\n        });\r\n\r\n        return container;\r\n    }\r\n});\r\n\r\nexport default InfoControl;","// airspaces.js\r\n// Store the airspace click handler as a module-level variable so we can reference it later\r\nlet airspaceClickHandler = null;\r\nlet currentLowerLimit = 3000; // Default value matching dropdown\r\nlet airspaceDebounceTimer;\r\n\r\n\r\n// Add the convertToMeters function\r\nfunction convertToMeters(value, unitCode) {\r\n  switch (unitCode) {\r\n    case 1: // Feet to meters\r\n      return value * 0.3048;\r\n    case 2: // Meters (no conversion)\r\n      return value;\r\n    case 6: // Flight Level (FL * 100 ft to meters)\r\n      return value * 100 * 0.3048;\r\n    default:\r\n      return null; // Unknown unit\r\n  }\r\n}\r\n\r\nfunction fetchAirspaces() {\r\n  // Make sure map is available\r\n  if (!window.map) {\r\n    console.error(\"Map not initialized yet\");\r\n    return;\r\n  }\r\n  \r\n  const center = window.map.getCenter();\r\n  const lat = center.lat.toFixed(6);\r\n  const lng = center.lng.toFixed(6);\r\n  const types = [0, 1, 3, 4, 5, 7, 26, 28];\r\n\r\n  const apiUrl = `${process.env.APP_DOMAIN}/api/airspaces?lat=${lat}&lng=${lng}&dist=200000&types=${encodeURIComponent(types.join(','))}`;\r\n\r\n  fetch(apiUrl)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      // Clear existing layers\r\n      window.airspaceEFG.clearLayers();\r\n\r\n      const airspaces = []; // Store polygons and data for later use\r\n\r\n      data.items.forEach(airspace => {\r\n        if (airspace.type === 0 && airspace.icaoClass === 4) {\r\n          return;\r\n        }\r\n\r\n        // Get current limit from dropdown\r\n        const selectedLimit = parseInt(document.getElementById('airspaceLowerLimit').value, 10);\r\n\r\n        // Filter based on lower limit converted to meters\r\n        const lowerLimit = airspace.lowerLimit;\r\n        if (!lowerLimit) return; // Skip if no lower limit data\r\n\r\n        const lowerLimitMeters = convertToMeters(lowerLimit.value, lowerLimit.unit);\r\n        if (lowerLimitMeters === null || lowerLimitMeters >= selectedLimit) {  // Modified line\r\n            return; // Now using dynamic limit from dropdown\r\n        }\r\n\r\n        if (airspace.geometry && airspace.geometry.type === \"Polygon\") {\r\n          const coordinates = airspace.geometry.coordinates[0].map(coord => [coord[1], coord[0]]);\r\n\r\n          const lowerLimit = airspace.lowerLimit.value;\r\n          const color = lowerLimit === 0 ? \"red\" : \"blue\";\r\n\r\n          const airspaceTypeText = airspaceTypes[airspace.type] || \"Unknown\";\r\n          const icaoClassText = icaoClasses[airspace.icaoClass] || \"Unknown\";\r\n\r\n          const polygon = L.polygon(coordinates, {\r\n            color: color,\r\n            weight: 2,\r\n            fillOpacity: 0.3\r\n          });\r\n\r\n          // Store airspace data with its polygon\r\n          airspaces.push({ polygon, data: airspace });\r\n\r\n          window.airspaceEFG.addLayer(polygon);\r\n        }\r\n      });\r\n\r\n      console.log(`Added ${airspaces.length} airspaces to the map`);\r\n\r\n      // Remove any existing click listeners to avoid duplicates\r\n      if (airspaceClickHandler) {\r\n        window.map.off(\"click\", airspaceClickHandler);\r\n      }\r\n\r\n      // Create a new click handler that captures the airspaces in its closure\r\n      airspaceClickHandler = function(e) {\r\n        // Check if the airspace layer is actually visible before processing clicks\r\n        if (!window.map.hasLayer(window.airspaceEFG)) {\r\n          return; // Exit if airspace layer is not visible\r\n        }\r\n\r\n        const clickedPoint = e.latlng;\r\n        const overlappingAirspaces = [];\r\n\r\n        airspaces.forEach(({ polygon, data }) => {\r\n          if (polygon.getBounds().contains(clickedPoint)) {\r\n            overlappingAirspaces.push(data);\r\n          }\r\n        });\r\n\r\n        if (overlappingAirspaces.length > 0) {\r\n          const popupContent = overlappingAirspaces.map(a => `\r\n            <b>${a.name}</b><br>\r\n            Type: ${airspaceTypes[a.type] || \"Unknown\"}<br>\r\n            ICAO Class: ${icaoClasses[a.icaoClass] || \"Unknown\"}<br>\r\n            ID: ${a._id}<br>\r\n            ↧${a.lowerLimit.value} ${getUnit(a.lowerLimit.unit)}  ↥${a.upperLimit.value} ${getUnit(a.upperLimit.unit)}<br>\r\n          `).join(\"<hr>\");\r\n\r\n          L.popup()\r\n            .setLatLng(clickedPoint)\r\n            .setContent(popupContent)\r\n            .openOn(window.map);\r\n        }\r\n      };\r\n      \r\n      // Add the new click handler\r\n      window.map.on(\"click\", airspaceClickHandler);\r\n    })\r\n    .catch(error => console.error(\"Error fetching airspaces:\", error));\r\n}\r\n\r\n// Lookup tables for airspace type and ICAO class\r\n\r\nconst airspaceTypes = {\r\n  0: \"Other\",\r\n  1: \"Restricted\",\r\n  2: \"Danger (D)\",\r\n  3: \"Prohibited (Parc reserve)\",\r\n  4: \"Controlled Tower Region (CTR)\",\r\n  5: \"Transponder Mandatory Zone (TMZ)\",\r\n  6: \"Radio Mandatory Zone (RMZ)\",\r\n  7: \"Terminal Maneuvering Area (TMA)\",\r\n  8: \"Temporary Reserved Area (TRA)\",\r\n  9: \"Temporary Segregated Area (TSA)\",\r\n  10: \"Flight Information Region (FIR)\",\r\n  11: \"Upper Flight Information Region (UIR)\",\r\n  12: \"Air Defense Identification Zone (ADIZ)\",\r\n  13: \"Airport Traffic Zone (ATZ)\",\r\n  14: \"Military Airport Traffic Zone (MATZ)\",\r\n  15: \"Airway\",\r\n  16: \"Military Training Route (MTR)\",\r\n  17: \"Alert Area\",\r\n  18: \"Warning Area\",\r\n  19: \"Protected Area\",\r\n  20: \"Helicopter Traffic Zone (HTZ)\",\r\n  21: \"Gliding Sector\",\r\n  22: \"Transponder Setting (TRP)\",\r\n  23: \"Traffic Information Zone (TIZ)\",\r\n  24: \"Traffic Information Area (TIA)\",\r\n  25: \"Military Training Area (MTA)\",\r\n  26: \"Control Area (CTA)\",\r\n  27: \"ACC Sector (ACC)\",\r\n  28: \"Aerial Sporting Or Recreational Activity\",\r\n  29: \"Low Altitude Overflight Restriction\",\r\n  30: \"Military Route (MRT)\",\r\n  31: \"TSA/TRA Feeding Route (TFR)\",\r\n  32: \"VFR Sector\",\r\n  33: \"FIS Sector\",\r\n  34: \"Lower Traffic Area (LTA)\",\r\n  35: \"Upper Traffic Area (UTA)\"\r\n};\r\n\r\nconst icaoClasses = {\r\n  0: \"A\",\r\n  1: \"B\",\r\n  2: \"C\",\r\n  3: \"D\",\r\n  4: \"E\",\r\n  5: \"F\",\r\n  6: \"G\",\r\n  8: \"Special Use Airspace (SUA)\"\r\n};\r\n\r\nfunction getUnit(unitCode) {\r\n  const units = {\r\n    1: \"ft\", // Feet\r\n    2: \"m\",\r\n    6: \"FL\"  // Flight Level\r\n  };\r\n  return units[unitCode] || \"Unknown\";\r\n}\r\n\r\n\r\n// Export the fetchAirspaces function to make it globally available\r\nwindow.fetchAirspaces = fetchAirspaces;\r\n\r\n// Listen for map layer visibility changes\r\ndocument.addEventListener('map_initialized', function() {\r\n  console.log(\"Setting up airspace layer events\");\r\n  \r\n  // Add event listener for when the airspace layer is added to the map\r\n  window.map.on('overlayadd', function(e) {\r\n    if (e.name === 'Airspaces' || e.name === 'Gliding' || e.name === 'Notam') {\r\n      console.log(`Overlay added: ${e.name}, fetching airspaces`);\r\n      fetchAirspaces();\r\n    }\r\n  });\r\n\r\n  // Add event listener with debouncing\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  document.body.addEventListener('change', function(e) {\r\n    if (e.target && e.target.id === 'airspaceLowerLimit') {\r\n      const newLimit = parseInt(e.target.value, 10);\r\n      \r\n      // Only update if value changed\r\n      if (newLimit !== currentLowerLimit) {\r\n        currentLowerLimit = newLimit;\r\n        \r\n        // Clear any pending debounce\r\n        clearTimeout(airspaceDebounceTimer);\r\n        \r\n        // Debounce to prevent rapid successive requests\r\n        airspaceDebounceTimer = setTimeout(() => {\r\n          if (window.map.hasLayer(window.airspaceEFG)) {\r\n            console.log(`Lower limit changed to ${newLimit}m, reloading airspaces`);\r\n            fetchAirspaces();\r\n          }\r\n        }, 300); // 300ms debounce delay\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\n\r\n  // Also set up the moveend event to refresh airspaces when panning/zooming\r\n  window.map.on('moveend', function() {\r\n    // Only fetch if the layer is currently visible\r\n    if (window.map.hasLayer(window.airspaceEFG)) {\r\n      console.log(\"Map moved, refreshing airspaces\");\r\n      fetchAirspaces();\r\n    }\r\n  });\r\n});\r\n\r\n\r\n// Don't auto-fetch on script load - wait for the layer to be enabled\r\n// Remove or comment out: fetchAirspaces();","// airspaces.js\r\n// Store the airspace click handler as a module-level variable so we can reference it later\r\nlet airspaceClickHandler = null;\r\n\r\nfunction fetchAirspacesGliding() {\r\n  // Make sure map is available\r\n  if (!window.map) {\r\n    console.error(\"Map not initialized yet\");\r\n    return;\r\n  }\r\n  \r\n  const center = window.map.getCenter();\r\n  const lat = center.lat.toFixed(6);\r\n  const lng = center.lng.toFixed(6);\r\n  const types = [21];\r\n\r\n  const apiUrl = `${process.env.APP_DOMAIN}/api/airspaces?lat=${lat}&lng=${lng}&dist=200000&types=${encodeURIComponent(types.join(','))}`;\r\n\r\n  fetch(apiUrl)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      // Clear existing layers\r\n      window.airspaceGliding.clearLayers();\r\n\r\n      const airspaces = []; // Store polygons and data for later use\r\n\r\n      data.items.forEach(airspace => {\r\n        if (airspace.type === 0 && airspace.icaoClass === 4) {\r\n          return;\r\n        }\r\n\r\n        if (airspace.geometry && airspace.geometry.type === \"Polygon\") {\r\n          const coordinates = airspace.geometry.coordinates[0].map(coord => [coord[1], coord[0]]);\r\n\r\n          const lowerLimit = airspace.lowerLimit.value;\r\n          const color = lowerLimit === 0 ? \"red\" : \"green\";\r\n\r\n          const airspaceTypeText = airspaceTypes[airspace.type] || \"Unknown\";\r\n          const icaoClassText = icaoClasses[airspace.icaoClass] || \"Unknown\";\r\n\r\n          const polygon = L.polygon(coordinates, {\r\n            color: color,\r\n            weight: 2,\r\n            fillOpacity: 0.3\r\n          });\r\n\r\n          // Store airspace data with its polygon\r\n          airspaces.push({ polygon, data: airspace });\r\n\r\n          window.airspaceGliding.addLayer(polygon);\r\n        }\r\n      });\r\n\r\n      console.log(`Added ${airspaces.length} airspaces to the map`);\r\n\r\n      // Remove any existing click listeners to avoid duplicates\r\n      if (airspaceClickHandler) {\r\n        window.map.off(\"click\", airspaceClickHandler);\r\n      }\r\n\r\n      // Create a new click handler that captures the airspaces in its closure\r\n      airspaceClickHandler = function(e) {\r\n        // Check if the airspace layer is actually visible before processing clicks\r\n        if (!window.map.hasLayer(window.airspaceGliding)) {\r\n          return; // Exit if airspace layer is not visible\r\n        }\r\n\r\n        const clickedPoint = e.latlng;\r\n        const overlappingAirspaces = [];\r\n\r\n        airspaces.forEach(({ polygon, data }) => {\r\n          if (polygon.getBounds().contains(clickedPoint)) {\r\n            overlappingAirspaces.push(data);\r\n          }\r\n        });\r\n\r\n        if (overlappingAirspaces.length > 0) {\r\n          const popupContent = overlappingAirspaces.map(a => `\r\n            <b>${a.name}</b><br>\r\n            Type: ${airspaceTypes[a.type] || \"Unknown\"}<br>\r\n            ICAO Class: ${icaoClasses[a.icaoClass] || \"Unknown\"}<br>\r\n            ↧${a.lowerLimit.value} ${getUnit(a.lowerLimit.unit)}  ↥${a.upperLimit.value} ${getUnit(a.upperLimit.unit)}<br>\r\n          `).join(\"<hr>\");\r\n\r\n          L.popup()\r\n            .setLatLng(clickedPoint)\r\n            .setContent(popupContent)\r\n            .openOn(window.map);\r\n        }\r\n      };\r\n      \r\n      // Add the new click handler\r\n      window.map.on(\"click\", airspaceClickHandler);\r\n    })\r\n    .catch(error => console.error(\"Error fetching airspaces:\", error));\r\n}\r\n\r\n// Lookup tables for airspace type and ICAO class\r\n\r\nconst airspaceTypes = {\r\n  0: \"Other\",\r\n  1: \"Restricted\",\r\n  2: \"Danger (D)\",\r\n  3: \"Prohibited (Parc reserve)\",\r\n  4: \"Controlled Tower Region (CTR)\",\r\n  5: \"Transponder Mandatory Zone (TMZ)\",\r\n  6: \"Radio Mandatory Zone (RMZ)\",\r\n  7: \"Terminal Maneuvering Area (TMA)\",\r\n  8: \"Temporary Reserved Area (TRA)\",\r\n  9: \"Temporary Segregated Area (TSA)\",\r\n  10: \"Flight Information Region (FIR)\",\r\n  11: \"Upper Flight Information Region (UIR)\",\r\n  12: \"Air Defense Identification Zone (ADIZ)\",\r\n  13: \"Airport Traffic Zone (ATZ)\",\r\n  14: \"Military Airport Traffic Zone (MATZ)\",\r\n  15: \"Airway\",\r\n  16: \"Military Training Route (MTR)\",\r\n  17: \"Alert Area\",\r\n  18: \"Warning Area\",\r\n  19: \"Protected Area\",\r\n  20: \"Helicopter Traffic Zone (HTZ)\",\r\n  21: \"Gliding Sector\",\r\n  22: \"Transponder Setting (TRP)\",\r\n  23: \"Traffic Information Zone (TIZ)\",\r\n  24: \"Traffic Information Area (TIA)\",\r\n  25: \"Military Training Area (MTA)\",\r\n  26: \"Control Area (CTA)\",\r\n  27: \"ACC Sector (ACC)\",\r\n  28: \"Aerial Sporting Or Recreational Activity\",\r\n  29: \"Low Altitude Overflight Restriction\",\r\n  30: \"Military Route (MRT)\",\r\n  31: \"TSA/TRA Feeding Route (TFR)\",\r\n  32: \"VFR Sector\",\r\n  33: \"FIS Sector\",\r\n  34: \"Lower Traffic Area (LTA)\",\r\n  35: \"Upper Traffic Area (UTA)\"\r\n};\r\n\r\nconst icaoClasses = {\r\n  0: \"A\",\r\n  1: \"B\",\r\n  2: \"C\",\r\n  3: \"D\",\r\n  4: \"E\",\r\n  5: \"F\",\r\n  6: \"G\",\r\n  8: \"Special Use Airspace (SUA)\"\r\n};\r\n\r\nfunction getUnit(unitCode) {\r\n  const units = {\r\n    1: \"ft\", // Feet\r\n    6: \"FL\"  // Flight Level\r\n  };\r\n  return units[unitCode] || \"Unknown\";\r\n}\r\n\r\n\r\n// Export the fetchAirspacesGliding function to make it globally available\r\nwindow.fetchAirspacesGliding = fetchAirspacesGliding;\r\n\r\n// Listen for map layer visibility changes\r\ndocument.addEventListener('map_initialized', function() {\r\n  console.log(\"Setting up airspace layer events\");\r\n  \r\n  // Add event listener for when the airspace layer is added to the map\r\n  window.map.on('overlayadd', function(e) {\r\n    if (e.name === 'Airspaces' || e.name === 'Gliding' || e.name === 'Notam') {\r\n      console.log(`Overlay added: ${e.name}, fetching airspaces`);\r\n      fetchAirspacesGliding();\r\n    }\r\n  });\r\n  \r\n  // Also set up the moveend event to refresh airspaces when panning/zooming\r\n  window.map.on('moveend', function() {\r\n    // Only fetch if the layer is currently visible\r\n    if (window.map.hasLayer(window.airspaceGliding)) {\r\n      console.log(\"Map moved, refreshing airspaces\");\r\n      fetchAirspacesGliding();\r\n    }\r\n  });\r\n});\r\n\r\n// Don't auto-fetch on script load - wait for the layer to be enabled\r\n// Remove or comment out: fetchAirspacesGliding();","// airspaces.js\r\n// Store the airspace click handler as a module-level variable so we can reference it later\r\nlet airspaceClickHandler = null;\r\n\r\nfunction fetchAirspacesNotam() {\r\n  // Make sure map is available\r\n  if (!window.map) {\r\n    console.error(\"Map not initialized yet\");\r\n    return;\r\n  }\r\n  \r\n  const center = window.map.getCenter();\r\n  const lat = center.lat.toFixed(6);\r\n  const lng = center.lng.toFixed(6);\r\n  const types = [8, 9];\r\n\r\n  const apiUrl = `${process.env.APP_DOMAIN}/api/airspaces?lat=${lat}&lng=${lng}&dist=200000&types=${encodeURIComponent(types.join(','))}`;\r\n\r\n  fetch(apiUrl)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      // Clear existing layers\r\n      window.airspaceNotam.clearLayers();\r\n\r\n      const airspaces = []; // Store polygons and data for later use\r\n\r\n      data.items.forEach(airspace => {\r\n        if (airspace.type === 0 && airspace.icaoClass === 4) {\r\n          return;\r\n        }\r\n\r\n        if (airspace.geometry && airspace.geometry.type === \"Polygon\") {\r\n          const coordinates = airspace.geometry.coordinates[0].map(coord => [coord[1], coord[0]]);\r\n\r\n          const lowerLimit = airspace.lowerLimit.value;\r\n          const color = lowerLimit === 0 ? \"red\" : \"blue\";\r\n\r\n          const airspaceTypeText = airspaceTypes[airspace.type] || \"Unknown\";\r\n          const icaoClassText = icaoClasses[airspace.icaoClass] || \"Unknown\";\r\n\r\n          const polygon = L.polygon(coordinates, {\r\n            color: color,\r\n            weight: 2,\r\n            fillOpacity: 0.3\r\n          });\r\n\r\n          // Store airspace data with its polygon\r\n          airspaces.push({ polygon, data: airspace });\r\n\r\n          window.airspaceNotam.addLayer(polygon);\r\n        }\r\n      });\r\n\r\n      console.log(`Added ${airspaces.length} airspaces to the map`);\r\n\r\n      // Remove any existing click listeners to avoid duplicates\r\n      if (airspaceClickHandler) {\r\n        window.map.off(\"click\", airspaceClickHandler);\r\n      }\r\n\r\n      // Create a new click handler that captures the airspaces in its closure\r\n      airspaceClickHandler = function(e) {\r\n        // Check if the airspace layer is actually visible before processing clicks\r\n        if (!window.map.hasLayer(window.airspaceNotam)) {\r\n          return; // Exit if airspace layer is not visible\r\n        }\r\n\r\n        const clickedPoint = e.latlng;\r\n        const overlappingAirspaces = [];\r\n\r\n        airspaces.forEach(({ polygon, data }) => {\r\n          if (polygon.getBounds().contains(clickedPoint)) {\r\n            overlappingAirspaces.push(data);\r\n          }\r\n        });\r\n\r\n        if (overlappingAirspaces.length > 0) {\r\n          const popupContent = overlappingAirspaces.map(a => `\r\n            <b>${a.name}</b><br>\r\n            Type: ${airspaceTypes[a.type] || \"Unknown\"}<br>\r\n            ICAO Class: ${icaoClasses[a.icaoClass] || \"Unknown\"}<br>\r\n            ↧${a.lowerLimit.value} ${getUnit(a.lowerLimit.unit)}  ↥${a.upperLimit.value} ${getUnit(a.upperLimit.unit)}<br>\r\n          `).join(\"<hr>\");\r\n\r\n          L.popup()\r\n            .setLatLng(clickedPoint)\r\n            .setContent(popupContent)\r\n            .openOn(window.map);\r\n        }\r\n      };\r\n      \r\n      // Add the new click handler\r\n      window.map.on(\"click\", airspaceClickHandler);\r\n    })\r\n    .catch(error => console.error(\"Error fetching airspaces:\", error));\r\n}\r\n\r\n// Lookup tables for airspace type and ICAO class\r\n\r\nconst airspaceTypes = {\r\n  0: \"Other\",\r\n  1: \"Restricted\",\r\n  2: \"Danger (D)\",\r\n  3: \"Prohibited (Parc reserve)\",\r\n  4: \"Controlled Tower Region (CTR)\",\r\n  5: \"Transponder Mandatory Zone (TMZ)\",\r\n  6: \"Radio Mandatory Zone (RMZ)\",\r\n  7: \"Terminal Maneuvering Area (TMA)\",\r\n  8: \"Temporary Reserved Area (TRA)\",\r\n  9: \"Temporary Segregated Area (TSA)\",\r\n  10: \"Flight Information Region (FIR)\",\r\n  11: \"Upper Flight Information Region (UIR)\",\r\n  12: \"Air Defense Identification Zone (ADIZ)\",\r\n  13: \"Airport Traffic Zone (ATZ)\",\r\n  14: \"Military Airport Traffic Zone (MATZ)\",\r\n  15: \"Airway\",\r\n  16: \"Military Training Route (MTR)\",\r\n  17: \"Alert Area\",\r\n  18: \"Warning Area\",\r\n  19: \"Protected Area\",\r\n  20: \"Helicopter Traffic Zone (HTZ)\",\r\n  21: \"Gliding Sector\",\r\n  22: \"Transponder Setting (TRP)\",\r\n  23: \"Traffic Information Zone (TIZ)\",\r\n  24: \"Traffic Information Area (TIA)\",\r\n  25: \"Military Training Area (MTA)\",\r\n  26: \"Control Area (CTA)\",\r\n  27: \"ACC Sector (ACC)\",\r\n  28: \"Aerial Sporting Or Recreational Activity\",\r\n  29: \"Low Altitude Overflight Restriction\",\r\n  30: \"Military Route (MRT)\",\r\n  31: \"TSA/TRA Feeding Route (TFR)\",\r\n  32: \"VFR Sector\",\r\n  33: \"FIS Sector\",\r\n  34: \"Lower Traffic Area (LTA)\",\r\n  35: \"Upper Traffic Area (UTA)\"\r\n};\r\n\r\nconst icaoClasses = {\r\n  0: \"A\",\r\n  1: \"B\",\r\n  2: \"C\",\r\n  3: \"D\",\r\n  4: \"E\",\r\n  5: \"F\",\r\n  6: \"G\",\r\n  8: \"Special Use Airspace (SUA)\"\r\n};\r\n\r\nfunction getUnit(unitCode) {\r\n  const units = {\r\n    1: \"ft\", // Feet\r\n    6: \"FL\"  // Flight Level\r\n  };\r\n  return units[unitCode] || \"Unknown\";\r\n}\r\n\r\n\r\n// Export the fetchAirspacesNotam function to make it globally available\r\nwindow.fetchAirspacesNotam = fetchAirspacesNotam;\r\n\r\n// Listen for map layer visibility changes\r\ndocument.addEventListener('map_initialized', function() {\r\n  console.log(\"Setting up airspace layer events\");\r\n  \r\n  // Add event listener for when the airspace layer is added to the map\r\n  window.map.on('overlayadd', function(e) {\r\n    if (e.name === 'Airspaces' || e.name === 'Gliding' || e.name === 'Notam') {\r\n      console.log(`Overlay added: ${e.name}, fetching airspaces`);\r\n      fetchAirspacesNotam();\r\n    }\r\n  });\r\n  \r\n  // Also set up the moveend event to refresh airspaces when panning/zooming\r\n  window.map.on('moveend', function() {\r\n    // Only fetch if the layer is currently visible\r\n    if (window.map.hasLayer(window.airspaceNotam)) {\r\n      console.log(\"Map moved, refreshing airspaces\");\r\n      fetchAirspacesNotam();\r\n    }\r\n  });\r\n});\r\n\r\n// Don't auto-fetch on script load - wait for the layer to be enabled\r\n// Remove or comment out: fetchAirspacesNotam();","import moment from 'moment';\r\nimport 'moment-timezone'; \r\nimport * as turf from '@turf/turf';\r\n\r\nlet airspaceClickHandler = null;\r\nlet currentLowerLimit = 3000; // Default matches dropdown\r\nlet airspaceDebounceTimer;\r\nlet selectedDateStr = getCurrentDateStr(); // Store the selected date\r\n\r\n// Helper function to get current date string in YYYY-MM-DD format\r\nfunction getCurrentDateStr() {\r\n  const today = new Date();\r\n  return `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;\r\n}\r\n\r\n// Helper function to convert limit to meters\r\nfunction getLimitMeters(limit) {\r\n  if (!limit) return null;\r\n  \r\n  switch (limit.type) {\r\n    case 'FL': // Flight level (already in hundreds of feet)\r\n      return limit.height * 0.3048; // Convert feet to meters\r\n    case 'AMSL': // Feet above mean sea level\r\n    case 'AGL': // Feet above ground level\r\n      return limit.height * 0.3048;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction fetchAirspacesXC() {\r\n    // Make sure map is available\r\n\r\n    if (!window.map) {\r\n      console.error(\"Map not initialized yet\");\r\n      return;\r\n    }\r\n    \r\n    const center = window.map.getCenter();\r\n    const lat = center.lat.toFixed(6);\r\n    const lng = center.lng.toFixed(6);\r\n\r\n    // Get map bounds for the query\r\n    const bounds = window.map.getBounds();\r\n    const nw = bounds.getNorthWest();\r\n    const se = bounds.getSouthEast();\r\n\r\n    // Use the selected date instead of current date\r\n    const dateStr = selectedDateStr;\r\n    \r\n   // Build API URL with parameters\r\n   const apiUrl = `${process.env.APP_DOMAIN}/api/airspacesXCdb?startDate=${dateStr}&nw_lat=${nw.lat.toFixed(6)}&nw_lng=${nw.lng.toFixed(6)}&se_lat=${se.lat.toFixed(6)}&se_lng=${se.lng.toFixed(6)}`;\r\n \r\n    fetch(apiUrl)\r\n    .then(response => response.json())\r\n    \r\n      .then(data => {\r\n        // Clear existing layers\r\n        window.airspaceXC.clearLayers();\r\n  \r\n        const airspaces = []; // Store polygons and data for later use\r\n\r\n      // Remove any existing click listeners to avoid duplicates\r\n      if (airspaceClickHandler) {\r\n        window.map.off(\"click\", airspaceClickHandler);\r\n        airspaceClickHandler = null; // Clean up reference\r\n      }\r\n  \r\n        // Check if data is a GeoJSON FeatureCollection\r\n        const features = data.features || [];\r\n\r\n\r\n        let filteredCount = 0;\r\n        let filteredAirspaces = [];\r\n        let includedAirspaces = [];\r\n\r\n        // Precompute the selected date's start in UTC once\r\n        const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n        const selectedDateStartLocal = moment.tz(selectedDateStr, \"YYYY-MM-DD\", userTimezone).startOf('day');\r\n        const selectedDateStartUTC = selectedDateStartLocal.utc().toDate();\r\n            \r\n        \r\n        features.forEach(feature => {\r\n          if (feature.geometry && feature.geometry.type === \"Polygon\") {\r\n        \r\n            // Skip V00 names\r\n            if (feature.properties.name && feature.properties.name.startsWith(\"V00\")) {\r\n              return;\r\n            }\r\n        \r\n            // Check lower limit\r\n            const lowerLimitMeters = getLimitMeters(feature.properties.airlower_j);\r\n            const shouldFilter = lowerLimitMeters === null || lowerLimitMeters > currentLowerLimit;\r\n            if (shouldFilter) {\r\n              filteredAirspaces.push({ name: feature.properties.name, limit: lowerLimitMeters });\r\n              return;\r\n            } else {\r\n              includedAirspaces.push({ name: feature.properties.name, limit: lowerLimitMeters });\r\n            }\r\n        \r\n            // Check expiration date\r\n            let isExpired = false;\r\n            if (feature.properties.descriptions && Array.isArray(feature.properties.descriptions)) {\r\n              for (const desc of feature.properties.descriptions) {\r\n                const description = desc.airdescription || '';\r\n                const cMatch = description.match(/C\\)\\s*(\\d{10})/);\r\n                if (cMatch && cMatch[1]) {\r\n                  // Parse expiration date\r\n                  const dateStr = cMatch[1];\r\n                  try {\r\n                    const year = 2000 + parseInt(dateStr.substring(0, 2));\r\n                    const month = parseInt(dateStr.substring(2, 4)) - 1;\r\n                    const day = parseInt(dateStr.substring(4, 6));\r\n                    const hour = parseInt(dateStr.substring(6, 8));\r\n                    const minute = parseInt(dateStr.substring(8, 10));\r\n                    const expirationDate = new Date(Date.UTC(year, month, day, hour, minute));\r\n                    if (expirationDate < selectedDateStartUTC) {\r\n                      isExpired = true;\r\n                      break;\r\n                    }\r\n                  } catch (error) {\r\n                    console.error(\"Error parsing expiration date:\", error);\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            if (isExpired) return;\r\n        \r\n            // Check activations\r\n            let hasActiveActivation = false;\r\n            if (feature.properties.activations && Array.isArray(feature.properties.activations) && feature.properties.activations.length > 0) {\r\n              const userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n              const selectedDateEndLocal = moment.tz(selectedDateStr, \"YYYY-MM-DD\", userTimezone).endOf('day');\r\n              const selectedDateEndUTC = selectedDateEndLocal.utc().toDate();\r\n        \r\n              for (const activation of feature.properties.activations) {\r\n                const activationStart = new Date(activation[0]);\r\n                const activationEnd = new Date(activation[1]);\r\n                if (activationStart <= selectedDateEndUTC && activationEnd >= selectedDateStartUTC) {\r\n                  hasActiveActivation = true;\r\n                  break;\r\n                }\r\n              }\r\n        \r\n              if (!hasActiveActivation) {\r\n                return;\r\n              }\r\n            }\r\n        \r\n            // Additional check for R class airspaces\r\n            if (feature.properties.airspaceClass === \"R\") {\r\n              let hasExpirationDate = false;\r\n              if (feature.properties.descriptions && Array.isArray(feature.properties.descriptions)) {\r\n                for (const desc of feature.properties.descriptions) {\r\n                  const description = desc.airdescription || '';\r\n                  if (description.match(/C\\)\\s*(\\d{10})/)) {\r\n                    hasExpirationDate = true;\r\n                    break;\r\n                  }\r\n                }\r\n              }\r\n        \r\n              // Skip R airspaces without expiration date and active activation\r\n              if (!hasExpirationDate && !hasActiveActivation) {\r\n                return;\r\n              }\r\n            }\r\n        \r\n            // Proceed to create and add the polygon to the map\r\n            const coordinates = feature.geometry.coordinates[0].map(coord => [coord[1], coord[0]]);\r\n            const polygon = L.polygon(coordinates, {\r\n              color: feature.properties.strokeColor || \"blue\",\r\n              weight: feature.properties.strokeWeight || 2,\r\n              fillColor: feature.properties.fillColor || \"blue\",\r\n              fillOpacity: feature.properties.fillOpacity || 0.3\r\n            });\r\n        \r\n            // MODIFIED: Single push with all required properties\r\n            airspaces.push({ \r\n              polygon,\r\n              data: feature.properties,\r\n              geometry: feature.geometry // Store original GeoJSON geometry\r\n            });\r\n            window.airspaceXC.addLayer(polygon);\r\n          }\r\n        });\r\n\r\n        // After processing all features \r\n        // Create a new click handler that captures the airspaces in its closure\r\n        airspaceClickHandler = function(e) {\r\n          // Check if the airspace layer is actually visible before processing clicks\r\n          if (!window.map.hasLayer(window.airspaceXC)) {\r\n            return; // Exit if airspace layer is not visible\r\n          }\r\n  \r\n          const clickedPoint = e.latlng;\r\n          const overlappingAirspaces = [];\r\n\r\n          // Convert clicked point to GeoJSON format [lng, lat]\r\n          const pt = turf.point([clickedPoint.lng, clickedPoint.lat]);\r\n  \r\n          airspaces.forEach(({ polygon, data, geometry }) => {\r\n            try {\r\n              // Convert stored GeoJSON geometry to Turf polygon\r\n              const poly = turf.polygon(geometry.coordinates);\r\n              \r\n              // Perform accurate point-in-polygon check\r\n              if (turf.booleanPointInPolygon(pt, poly)) {\r\n                overlappingAirspaces.push(data);\r\n              }\r\n            } catch (error) {\r\n              console.error(\"Error checking point in polygon:\", error);\r\n            }\r\n          });\r\n  \r\n          if (overlappingAirspaces.length > 0) {\r\n              // Inside your click handler:\r\n              const tzName = moment.tz.guess(); // Gets the user's timezone like \"Europe/Berlin\"\r\n              const tzAbbreviation = moment.tz(tzName).zoneAbbr(); // Gets \"CET\"\r\n              const tzOffset = moment.tz(tzName).format('Z'); // Gets \"+01:00\"\r\n\r\n              const timezoneInfo = `<div class=\"timezone-info\" style=\"margin-top: 5px; font-size: 0.85em;\">Local timezone: ${tzAbbreviation} (UTC${tzOffset})</div>`;\r\n\r\n              const popupContent = overlappingAirspaces.map(a => {\r\n              // Create the description HTML if there are any descriptions\r\n              let descriptionsHtml = '';\r\n              // Check if descriptions exists and is actually an array with elements\r\n              if (a.descriptions && Array.isArray(a.descriptions) && a.descriptions.length > 0) {\r\n                // Function to format description text with line breaks before A), B), etc.\r\n                const formatDescription = (text) => {\r\n                  if (!text) return '';\r\n                  \r\n                  // Add line breaks before A), B), C), etc.\r\n                  return text.replace(/([ABCDEFGQ]\\))/g, '<br>$1');\r\n                };\r\n                \r\n                descriptionsHtml = `\r\n                  <div class=\"airspace-descriptions\" style=\"font-size: 0.8em;\">\r\n                      ${a.descriptions.map(desc => {\r\n                        const formattedDesc = formatDescription(desc.airdescription || '');\r\n                        return `${formattedDesc} ${desc.airlanguage ? `(${desc.airlanguage})` : ''}`;\r\n                      }).join('')}\r\n                  </div>\r\n                `;\r\n              }\r\n\r\n              // Create the description HTML if there are any descriptions\r\n              let activationsHtml = '';\r\n\r\n              // Add null check and array validation\r\n              if (a.descriptions && Array.isArray(a.descriptions) && a.descriptions.length > 0) {\r\n                // existing description formatting code\r\n              }\r\n\r\n              // Check if activations exists and is actually an array with elements\r\n              if (a.activations && Array.isArray(a.activations) && a.activations.length > 0) {\r\n                activationsHtml = `\r\n                  <div class=\"airspace-activations\">\r\n                    <b>Activations:</b><br>\r\n                    ${a.activations.map(activation => {\r\n                      const startMoment = moment.utc(activation[0]).tz(tzName);\r\n                      const endMoment = moment.utc(activation[1]).tz(tzName);\r\n                      return `${startMoment.format('MMM D, HH:mm z')} - ${endMoment.format('MMM D, HH:mm z')}`;\r\n                    }).join('<br>')}\r\n                  </div>\r\n                `;\r\n              }\r\n\r\n                // Define helper function to format lower/upper limits\r\n              const formatLimit = (limit, original) => {\r\n                if (!limit) return original || 'N/A'; // Fallback to original string if no structured data\r\n                const type = limit.type;\r\n                const height = limit.height;\r\n                \r\n                // Flight Level (FL) handling\r\n                if (type === 'FL') {\r\n                  const meters = Math.round(height * 0.3048); // Convert feet to meters\r\n                  const flNumber = height / 100; // Calculate FL (e.g., 10000ft → FL100)\r\n                  return `${meters}m (FL${flNumber})`;\r\n                }\r\n                // AMSL or AGL handling (feet)\r\n                else if (type === 'AMSL' || type === 'AGL') {\r\n                  const meters = Math.round(height * 0.3048);\r\n                  return `${meters}m`;\r\n                }\r\n                // Unknown type: fallback to original string\r\n                else {\r\n                  return original || 'N/A';\r\n                }\r\n              };\r\n\r\n                // Format lower and upper limits\r\n              const lower = formatLimit(a.airlower_j, a.lowerLimit);\r\n              const upper = formatLimit(a.airupper_j, a.upperLimit);\r\n                          \r\n              return `\r\n              <b>${a.name} (${a.airspaceClass})</b><br>\r\n              <b>↧ </b>${lower} - <b>↥ </b>${upper}<br>\r\n              </div>\r\n                ${descriptionsHtml}\r\n                ${activationsHtml}\r\n              </div>\r\n              `;\r\n            }).join(\"<hr style='margin: 3px 0;'>\");\r\n          \r\n            L.popup()\r\n              .setLatLng(clickedPoint)\r\n              .setContent(popupContent)\r\n              .openOn(window.map);\r\n          }\r\n        };\r\n        \r\n        // Add the new click handler\r\n        window.map.on(\"click\", airspaceClickHandler);\r\n      })\r\n      .catch(error => console.error(\"Error fetching airspaces:\", error));\r\n  }\r\n\r\n\r\n  document.addEventListener('change', function(e) {\r\n    //close open popups\r\n    if (e.target && (e.target.id === 'airspaceLowerLimit' || e.target.id === 'airspaceTime')) {\r\n      // Close any open popup\r\n      if (window.map && window.map._popup) {\r\n        window.map.closePopup();\r\n      }\r\n    }\r\n    // Handle airspaceLowerLimit changes\r\n    if (e.target && e.target.id === 'airspaceLowerLimit') {\r\n        const newLimit = parseInt(e.target.value, 10);\r\n        \r\n        console.log(`Dropdown changed: old limit=${currentLowerLimit}m, new limit=${newLimit}m`);\r\n        \r\n        if (newLimit !== currentLowerLimit) {\r\n            currentLowerLimit = newLimit;\r\n            console.log(`Current limit updated to ${currentLowerLimit}m`);\r\n            \r\n            clearTimeout(airspaceDebounceTimer);\r\n            airspaceDebounceTimer = setTimeout(() => {\r\n                if (window.map.hasLayer(window.airspaceXC)) {\r\n                    console.log(`Triggering XC airspaces reload with limit=${currentLowerLimit}m`);\r\n                    fetchAirspacesXC();\r\n                }\r\n            }, 300);\r\n        }\r\n    }\r\n    // Handle date selection changes\r\n    if (e.target && e.target.id === 'airspaceTime') {\r\n      const newDate = e.target.value;\r\n      console.log('Selected airspace date:', newDate);\r\n\r\n      if (newDate !== selectedDateStr) {\r\n        selectedDateStr = newDate;\r\n        \r\n        // Debounce and refetch airspaces\r\n        clearTimeout(airspaceDebounceTimer);\r\n        airspaceDebounceTimer = setTimeout(() => {\r\n          if (window.map.hasLayer(window.airspaceXC)) {\r\n            console.log('Refetching airspaces with new date:', selectedDateStr);\r\n            fetchAirspacesXC();\r\n          }\r\n        }, 300);\r\n      }\r\n    }\r\n  });\r\n\r\nwindow.fetchAirspacesXC = fetchAirspacesXC;\r\n\r\n","// windstations-simple.js - Simplified version of windstations.js\r\n\r\n// Function to fetch wind stations\r\nfunction fetchWindStations() {\r\n  console.log(\"Fetching wind stations...\");\r\n  \r\n  // Clear existing wind layers\r\n  console.log(\"Wind layers cleared\");\r\n  \r\n  // Get map bounds\r\n  const bounds = window.map ? window.map.getBounds() : null;\r\n  if (!bounds) {\r\n    console.error(\"Map bounds not available\");\r\n    return;\r\n  }\r\n  \r\n  const nwLat = bounds.getNorthWest().lat;\r\n  const nwLng = bounds.getNorthWest().lng;\r\n  const seLat = bounds.getSouthEast().lat;\r\n  const seLng = bounds.getSouthEast().lng;\r\n  \r\n  // Fetch wind station data using the correct API endpoint\r\n  fetch(`/api/wind-data-getCurrent?nwLat=${nwLat}&nwLng=${nwLng}&seLat=${seLat}&seLng=${seLng}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      // Process wind stations\r\n      data.forEach((station) => {\r\n        // Create marker for each station\r\n        const marker = L.marker([station.lat, station.lon], {\r\n          icon: L.icon({\r\n            iconUrl: `/assets/images/wind-icon.png`,\r\n            iconSize: [24, 24],\r\n            iconAnchor: [12, 12],\r\n            popupAnchor: [0, -12],\r\n          }),\r\n        });\r\n        \r\n        // Fetch historical wind data using the correct API endpoint\r\n        fetch(`https://winds.mobi/api/2.3/stations/${station._id}/historic/?duration=21000&keys=w-dir&keys=w-avg&keys=w-max&keys=temp`)\r\n          .then((response) => response.json())\r\n          .then((chartData) => {\r\n            // Create popup content\r\n            const historyTable = createHistoryTable(chartData);\r\n            \r\n            const popupHtml = `\r\n              <style>\r\n                .tab-container {\r\n                  display: flex;\r\n                  border-bottom: 1px solid #ddd;\r\n                  padding: 10px 10px 0;\r\n                  background-color: #f5f5f5;\r\n                }\r\n                \r\n                .tab {\r\n                  padding: 8px 12px;\r\n                  margin-right: 5px;\r\n                  margin-bottom: 5px;\r\n                  background-color: #e0e0e0;\r\n                  border-radius: 4px 4px 0 0;\r\n                  cursor: pointer;\r\n                }\r\n                \r\n                .tab.active {\r\n                  background-color: #fff;\r\n                  border: 1px solid #ddd;\r\n                  border-bottom: 1px solid #fff;\r\n                  margin-bottom: -1px;\r\n                }\r\n                \r\n                .tab-content {\r\n                  padding: 10px;\r\n                  display: none;\r\n                }\r\n                \r\n                .wind-data-table {\r\n                  width: 100%;\r\n                  border-collapse: collapse;\r\n                }\r\n                \r\n                .wind-data-table th, .wind-data-table td {\r\n                  padding: 8px;\r\n                  text-align: left;\r\n                  border-bottom: 1px solid #ddd;\r\n                }\r\n                \r\n                .wind-data-table th {\r\n                  background-color: #f5f5f5;\r\n                }\r\n                \r\n                @media (max-width: 480px) {\r\n                  .tab {\r\n                    padding: 6px 10px;\r\n                    font-size: 12px;\r\n                  }\r\n                  \r\n                  .wind-data-table th, .wind-data-table td {\r\n                    padding: 5px 3px;\r\n                    font-size: 12px;\r\n                  }\r\n                  \r\n                  .wind-rose {\r\n                    display: none;\r\n                  }\r\n                }\r\n              </style>\r\n              <div class=\"tab-container\">\r\n                <div class=\"tab active\" onclick=\"showTab('table-${station._id}', this)\">Table</div>\r\n                <div class=\"tab\" onclick=\"showTab('chart-${station._id}', this)\">Chart</div>\r\n                <div class=\"tab\" onclick=\"showTab('camera-${station._id}', this)\">Camera</div>\r\n              </div>\r\n              <div id=\"table-${station._id}\" class=\"tab-content\">\r\n                ${historyTable}\r\n              </div>\r\n              <div id=\"chart-${station._id}\" class=\"tab-content chart-container\" style=\"display: none;\">\r\n                <canvas id=\"canvas-${station._id}\" width=\"100%\" height=\"200\"></canvas>\r\n              </div>\r\n              <div id=\"camera-${station._id}\" class=\"tab-content\" style=\"display: none;\">\r\n                <img id=\"camera-image-${station._id}\" src=\"\" alt=\"Camera Image\" style=\"width: 100%; height: auto;\">\r\n              </div>\r\n            `;\r\n            \r\n            // Determine optimal popup size based on device\r\n            const isMobile = window.innerWidth <= 480;\r\n            \r\n            // Use standard Leaflet popup\r\n            const popupOptions = {\r\n              maxWidth: isMobile ? window.innerWidth - 20 : 400,\r\n              className: 'wind-station-responsive-popup' + (isMobile ? ' mobile-popup' : '')\r\n            };\r\n            \r\n            marker.bindPopup(popupHtml, popupOptions);\r\n            \r\n            // When the popup is opened, initialize the chart\r\n            marker.on(\"popupopen\", () => {\r\n              setTimeout(() => {\r\n                const canvas = document.getElementById(`canvas-${station._id}`);\r\n                if (canvas) {\r\n                  // Get dimensions for the canvas\r\n                  const isMobile = window.innerWidth <= 480;\r\n                  const parent = canvas.parentElement;\r\n                  \r\n                  // Calculate optimal dimensions\r\n                  const containerWidth = parent ? parent.clientWidth : (window.innerWidth - 40);\r\n                  const containerHeight = isMobile ? 200 : 300;\r\n                  \r\n                  // Set canvas style dimensions\r\n                  canvas.style.width = containerWidth + \"px\";\r\n                  canvas.style.height = containerHeight + \"px\";\r\n                  \r\n                  // Set explicit canvas dimensions\r\n                  canvas.width = containerWidth;\r\n                  canvas.height = containerHeight;\r\n                  \r\n                  // Ensure canvas is visible\r\n                  canvas.style.display = 'block';\r\n                  \r\n                  // Force a reflow to ensure dimensions are applied\r\n                  if (parent) {\r\n                    parent.style.display = 'flex';\r\n                    parent.style.justifyContent = 'center';\r\n                    parent.style.alignItems = 'center';\r\n                    parent.offsetHeight; // Force reflow\r\n                  }\r\n                  \r\n                  console.log(`Canvas dimensions set: ${canvas.width}x${canvas.height}`);\r\n                  \r\n                  const ctx = canvas.getContext(\"2d\");\r\n                  if (ctx) {\r\n                    // Transform chartData so that each point has an x (timestamp) and y (value)\r\n                    const chartDataPointsAvg = chartData.map((entry) => ({\r\n                      x: entry._id * 1000, // convert seconds to ms\r\n                      y: entry[\"w-avg\"],\r\n                    }));\r\n                    const chartDataPointsMax = chartData.map((entry) => ({\r\n                      x: entry._id * 1000,\r\n                      y: entry[\"w-max\"],\r\n                    }));\r\n                    \r\n                    const chartInstance = new Chart(ctx, {\r\n                      type: \"line\",\r\n                      data: {\r\n                        datasets: [\r\n                          {\r\n                            label: \"Wind Avg (km/h)\",\r\n                            data: chartDataPointsAvg,\r\n                            borderColor: \"blue\",\r\n                            fill: false,\r\n                            pointRadius: 3,\r\n                          },\r\n                          {\r\n                            label: \"Wind Max (km/h)\",\r\n                            data: chartDataPointsMax,\r\n                            borderColor: \"red\",\r\n                            fill: false,\r\n                            pointRadius: 3,\r\n                          },\r\n                        ],\r\n                      },\r\n                      options: {\r\n                        responsive: true,\r\n                        maintainAspectRatio: false,\r\n                        animation: {\r\n                          duration: 0 // Disable animations for better performance\r\n                        },\r\n                        resizeDelay: 0, // Immediate resize\r\n                        layout: {\r\n                          padding: {\r\n                            left: 2,\r\n                            right: 2,\r\n                            top: 2,\r\n                            bottom: 5\r\n                          },\r\n                        },\r\n                        plugins: {\r\n                          legend: {\r\n                            display: false // Hide legend to save space\r\n                          },\r\n                          tooltip: {\r\n                            enabled: true,\r\n                            mode: 'index',\r\n                            intersect: false,\r\n                            callbacks: {\r\n                              title: function(tooltipItems) {\r\n                                // Format the time for the tooltip\r\n                                const date = new Date(tooltipItems[0].parsed.x);\r\n                                return date.toLocaleTimeString(\"de-DE\", {\r\n                                  hour: \"2-digit\",\r\n                                  minute: \"2-digit\"\r\n                                });\r\n                              }\r\n                            }\r\n                          }\r\n                        },\r\n                        scales: {\r\n                          x: {\r\n                            type: \"time\",\r\n                            time: {\r\n                              unit: \"hour\",\r\n                              displayFormats: {\r\n                                hour: \"HH:mm\",\r\n                              },\r\n                              tooltipFormat: \"HH:mm\",\r\n                            },\r\n                            grid: {\r\n                              drawBorder: true,\r\n                              color: 'rgba(0,0,0,0.1)',\r\n                            },\r\n                            ticks: {\r\n                              autoSkip: true,\r\n                              maxRotation: 0,\r\n                              minRotation: 0,\r\n                              padding: 5,\r\n                              maxTicksLimit: window.innerWidth <= 480 ? 4 : 8,\r\n                            }\r\n                          },\r\n                          y: {\r\n                            beginAtZero: true,\r\n                            grid: {\r\n                              drawBorder: true,\r\n                              color: 'rgba(0,0,0,0.1)',\r\n                            },\r\n                            ticks: {\r\n                              padding: 5,\r\n                              maxTicksLimit: 5,\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    });\r\n                    \r\n                    // Store chart instance on canvas for later access\r\n                    canvas.chartInstance = chartInstance;\r\n                  }\r\n                }\r\n                \r\n                // Check if camera image is available\r\n                if (station.camera && station.camera.url) {\r\n                  const cameraImageUrl = station.camera.url;\r\n                  const cameraImage = document.getElementById(`camera-image-${station._id}`);\r\n                  const cameraTabElement = document.getElementById(`camera-${station._id}`);\r\n                  \r\n                  if (cameraImage) {\r\n                    cameraImage.src = cameraImageUrl;\r\n                  }\r\n                  \r\n                  // Test if image is available\r\n                  const testImage = new Image();\r\n                  testImage.onload = function() {\r\n                    // Image loaded successfully, show camera tab\r\n                    if (cameraTabElement) {\r\n                      cameraTabElement.style.display = \"block\";\r\n                    }\r\n                  };\r\n                  testImage.onerror = function() {\r\n                    // Image failed to load, hide camera tab\r\n                    if (cameraTabElement) {\r\n                      cameraTabElement.style.display = \"none\";\r\n                    }\r\n                  };\r\n                  testImage.src = cameraImageUrl;\r\n                  \r\n                  // Set timeout as fallback in case responses are slow\r\n                  setTimeout(() => {\r\n                    if (!testImage.complete || testImage.naturalWidth === 0) {\r\n                      if (cameraTabElement) {\r\n                        cameraTabElement.style.display = \"none\";\r\n                      }\r\n                    }\r\n                  }, 2000);\r\n                }\r\n              }, 500);\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"Error fetching historical wind data:\", error);\r\n          });\r\n      });\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error fetching wind station data:\", error);\r\n    });\r\n}\r\n\r\n// Helper function to create history table\r\nfunction createHistoryTable(chartData) {\r\n  // Create table HTML\r\n  let tableHtml = `\r\n    <table class=\"wind-data-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>Time</th>\r\n          <th>Wind Avg</th>\r\n          <th>Wind Max</th>\r\n          <th>Direction</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n  `;\r\n  \r\n  // Add rows for each data point\r\n  chartData.forEach((entry) => {\r\n    const date = new Date(entry._id * 1000);\r\n    const time = date.toLocaleTimeString(\"de-DE\", {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\"\r\n    });\r\n    \r\n    tableHtml += `\r\n      <tr>\r\n        <td>${time}</td>\r\n        <td>${entry[\"w-avg\"]} km/h</td>\r\n        <td>${entry[\"w-max\"]} km/h</td>\r\n        <td>${entry[\"w-dir\"]}</td>\r\n      </tr>\r\n    `;\r\n  });\r\n  \r\n  tableHtml += `\r\n      </tbody>\r\n    </table>\r\n  `;\r\n  \r\n  return tableHtml;\r\n}\r\n\r\n// Enhanced tab switching function with improved chart handling\r\nwindow.showTab = function (tabId, element) {\r\n  console.log(\"Switching to tab:\", tabId);\r\n  \r\n  // Check if we're on mobile\r\n  const isMobile = window.innerWidth <= 480;\r\n  const popupElement = element ? element.closest('.mobile-popup') : null;\r\n  \r\n  // If we're on mobile and using the mobile popup, don't hide content\r\n  if (isMobile && popupElement) {\r\n    // Just add active class to the clicked tab\r\n    if (element) {\r\n      document.querySelectorAll(\".tab\").forEach((tab) => {\r\n        tab.classList.remove(\"active\");\r\n      });\r\n      element.classList.add(\"active\");\r\n    }\r\n    \r\n    // Make sure all content is visible\r\n    document.querySelectorAll(\".tab-content\").forEach((tab) => {\r\n      tab.style.display = \"block\";\r\n    });\r\n    \r\n    // Scroll to the clicked section\r\n    const targetTab = document.getElementById(tabId);\r\n    if (targetTab) {\r\n      targetTab.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  } else {\r\n    // Standard tab behavior for desktop\r\n    // Hide all tab content\r\n    document.querySelectorAll(\".tab-content\").forEach((tab) => {\r\n      tab.style.display = \"none\";\r\n    });\r\n\r\n    // Remove active class from all tabs\r\n    document.querySelectorAll(\".tab\").forEach((tab) => {\r\n      tab.classList.remove(\"active\");\r\n    });\r\n\r\n    // Show the target tab\r\n    const targetTab = document.getElementById(tabId);\r\n    if (targetTab) {\r\n      targetTab.style.display = \"block\";\r\n      \r\n      // Force repaint to ensure visibility\r\n      targetTab.offsetHeight;\r\n    } else {\r\n      console.error(\"Tab not found:\", tabId);\r\n    }\r\n\r\n    // Add active class to the clicked tab\r\n    if (element) {\r\n      element.classList.add(\"active\");\r\n    } else {\r\n      console.error(\"Element is null or undefined\");\r\n    }\r\n  }\r\n\r\n  // Special handling for chart tab\r\n  if (tabId.startsWith(\"chart-\")) {\r\n    const stationId = tabId.split(\"chart-\")[1];\r\n    console.log(\"Station ID:\", stationId);\r\n    const canvas = document.getElementById(`canvas-${stationId}`);\r\n    \r\n    if (canvas) {\r\n      // Force canvas to be visible\r\n      canvas.style.display = \"block\";\r\n      \r\n      // Get the container dimensions\r\n      const container = document.getElementById(tabId);\r\n      const isMobile = window.innerWidth <= 480;\r\n      \r\n      // Calculate container width based on available space\r\n      let containerWidth;\r\n      if (isMobile) {\r\n        // On mobile, use full browser width minus padding\r\n        containerWidth = window.innerWidth - 20;\r\n      } else {\r\n        // On desktop, use container width\r\n        containerWidth = container ? container.clientWidth : 400;\r\n      }\r\n      \r\n      // Set canvas dimensions based on container\r\n      canvas.style.width = containerWidth + \"px\";\r\n      canvas.style.height = (isMobile ? 200 : 300) + \"px\";\r\n      \r\n      // Set explicit dimensions for the canvas element\r\n      canvas.width = containerWidth;\r\n      canvas.height = isMobile ? 200 : 300;\r\n      \r\n      // Force a reflow\r\n      if (container) container.offsetHeight;\r\n      \r\n      // Resize the chart if it exists\r\n      if (canvas.chartInstance) {\r\n        setTimeout(() => {\r\n          try {\r\n            canvas.chartInstance.resize();\r\n            console.log(\"Chart resized successfully\");\r\n          } catch (e) {\r\n            console.error(\"Error resizing chart:\", e);\r\n          }\r\n        }, 100);\r\n        \r\n        // Add resize listener for the chart\r\n        const resizeChartOnWindowResize = () => {\r\n          if (canvas && canvas.chartInstance) {\r\n            const newIsMobile = window.innerWidth <= 480;\r\n            const newContainerWidth = newIsMobile ? window.innerWidth - 20 : (container ? container.clientWidth : 400);\r\n            \r\n            // Update canvas dimensions\r\n            canvas.style.width = newContainerWidth + \"px\";\r\n            canvas.style.height = (newIsMobile ? 200 : 300) + \"px\";\r\n            canvas.width = newContainerWidth;\r\n            canvas.height = newIsMobile ? 200 : 300;\r\n            \r\n            // Resize chart\r\n            try {\r\n              canvas.chartInstance.resize();\r\n              console.log(\"Chart resized on window resize in tab view\");\r\n            } catch (e) {\r\n              console.error(\"Error resizing chart:\", e);\r\n            }\r\n          }\r\n        };\r\n        \r\n        // Remove any existing handler\r\n        if (canvas.resizeHandler) {\r\n          window.removeEventListener('resize', canvas.resizeHandler);\r\n        }\r\n        \r\n        // Add resize listener\r\n        window.addEventListener('resize', resizeChartOnWindowResize);\r\n        \r\n        // Store the resize handler on the canvas for cleanup\r\n        canvas.resizeHandler = resizeChartOnWindowResize;\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nwindow.fetchWindStations = fetchWindStations;","// spotsHelper.js - Common functionality for loading and displaying spots on a map\r\n\r\n// Module-scoped variable to track Dropzone instance\r\nlet feedbackDropzone = null;\r\nlet currentFeedbackForm = null;\r\n\r\n// Swiper related functions\r\nfunction changeSwiper() {\r\n    if (typeof swiperc !== \"undefined\") {\r\n        if (window.innerWidth < 576) {\r\n            $(\".swiper2\").css(\"height\", \"\"); $(\".swiper2\").css(\"width\", \"320px\");\r\n            $(\".swiper2\").css(\"padding-left\", \"\"); $(\".swiper2\").css(\"padding-top\", \"30px\");\r\n            $(\".swiper2 > .swiper-wrapper\").css(\"width\", \"\"); $(\".swiper2 > .swiper-wrapper\").css(\"height\", \"100px\");\r\n            swiperc.changeDirection('horizontal', true);\r\n        }\r\n        else {\r\n            if (window.innerWidth < 840) {\r\n                $(\".swiper2\").css(\"width\", \"\"); $(\".swiper2\").css(\"height\", \"320px\");\r\n            }\r\n            else {\r\n                $(\".swiper2\").css(\"width\", \"\"); $(\".swiper2\").css(\"height\", \"460px\");\r\n            }\r\n            $(\".swiper2\").css(\"padding-top\", \"\"); $(\".swiper2\").css(\"padding-left\", \"30px\");\r\n            $(\".swiper2 > .swiper-wrapper\").css(\"height\", \"\"); $(\".swiper2 > .swiper-wrapper\").css(\"width\", \"100px\");\r\n            swiperc.changeDirection('vertical', true);\r\n        }\r\n    }\r\n}\r\n\r\nfunction initSwiper(idImg) {\r\n    let swiperv, swiperc;\r\n    // USED 09/24 Beschreibung: Initialisierung der Image-Swiper\r\n    var swiperLoop3 = (idImg < 4) ? false : true;\r\n    var swiperLoop4 = (idImg < 5) ? false : true;\r\n\r\n    swiperv = new Swiper('.swiper1', {\r\n        autoHeight: true,\r\n        direction: 'horizontal',\r\n        allowTouchMove: false,\r\n        mousewheel: false,\r\n        slidesPerView: 1,\r\n        loop: false,\r\n    });\r\n\r\n    swiperc = new Swiper('.swiper2', {\r\n        direction: 'vertical',\r\n        allowTouchMove: true,\r\n        mousewheel: true,\r\n        slidesPerView: 3,\r\n        spaceBetween: 10,\r\n        loop: swiperLoop3,\r\n        breakpoints: {\r\n            840: {\r\n                slidesPerView: 4,\r\n                loop: swiperLoop4\r\n            }\r\n        },\r\n        scrollbar: {\r\n            el: '.swiper-scrollbar',\r\n            hide: false,\r\n            draggable: true,\r\n        },\r\n        on: {\r\n            click: function() {\r\n                let iR = (this.clickedSlide.firstChild.id).substring(3) - 1;\r\n                swiperv.slideTo(iR, 1);\r\n            },\r\n            transitionEnd: function () {\r\n                let iR = this.realIndex;\r\n                swiperv.slideTo(iR, 1);\r\n            }\r\n        }\r\n    });\r\n\r\n    changeSwiper();\r\n}\r\n\r\n// Mapping wind directions to angles\r\nfunction getAngleRange(direction) {\r\n    const dirToAngle = {\r\n        \"N\": 0, \"NNE\": 22.5, \"NE\": 45, \"ENE\": 67.5,\r\n        \"E\": 90, \"ESE\": 112.5, \"SE\": 135, \"SSE\": 157.5,\r\n        \"S\": 180, \"SSW\": 202.5, \"SW\": 225, \"WSW\": 247.5,\r\n        \"W\": 270, \"WNW\": 292.5, \"NW\": 315, \"NNW\": 337.5\r\n    };\r\n\r\n    let angleRanges = [];\r\n    let parts = direction.split(',').map(part => part.trim());\r\n\r\n    parts.forEach(part => {\r\n        let range = part.split('-').map(dir => dir.trim());\r\n        if (range.length === 1) {\r\n            let angle = dirToAngle[range[0]];\r\n            if (angle !== undefined) {\r\n                angleRanges.push([angle - 22.5, angle + 22.5]);\r\n            }\r\n        } else if (range.length === 2) {\r\n            let start = dirToAngle[range[0]];\r\n            let end = dirToAngle[range[1]];\r\n            if (start !== undefined && end !== undefined) {\r\n                if (end < start) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                if (end - start > 180) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                angleRanges.push([start, end]);\r\n            }\r\n        }\r\n    });\r\n\r\n    return angleRanges;\r\n}\r\n\r\n// Fetch full place details when a popup is opened\r\nasync function loadPlaceDetails(layer, placeId) {\r\n    try {\r\n        const response = await fetch(`${process.env.APP_DOMAIN}/api/places/${placeId}`);\r\n        const data = await response.json();\r\n\r\n        if (data.error) {\r\n            console.error(\"Error fetching place details:\", data.error);\r\n            return;\r\n        }\r\n\r\n        let regex1 = /<center><b><a href=\"http:\\/\\/www\\.paraglidingearth\\.com\\/index\\.php\\?site=\\d+\">More information on ParaglidingEarth<\\/a><\\/b><\\/center>\\n?/g;\r\n        let regex2 = /<br>\\n<b>Take off : <\\/b><br>\\n?/g;\r\n        let regexHeight = /H \\d+(-\\d+)? m(?:, |<br>)/g;\r\n        let regexHD = /HD \\d+ m(?:<br>| \\/)/g;\r\n        let regexRating = /\\nrating \\d+\\/\\d+(?:\\n|<br>)*/gi;\r\n\r\n        let description = (data.properties.description || \"\")\r\n            .replace(regex1, \"\")\r\n            .replace(regex2, \"\")\r\n            .replace(regexHeight, \"\")\r\n            .replace(regexHD, \"\")\r\n            .replace(regexRating, \"\")\r\n            .trim();\r\n\r\n        window.currentPlaceName = data.properties.name;\r\n        window.currentPlaceId = data.properties.id; \r\n        window.currentStrPlacemarkId = data.properties.strPlacemarkId; \r\n\r\n        let popupContent = `<span style=\"color: #0087F7;\"><h5>${data.properties.name}</h5></span>\r\n                            <table style=\"border-collapse: collapse; width: 40%;\">\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Type:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.type}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Direction:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.direction}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Rating:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.rating != null ? data.properties.rating + '/6' : ' -'}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Height:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.height != null ? data.properties.height : ' -'}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Height difference:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.heightdifference != null ? data.properties.heightdifference : ' -'}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th style=\"text-align: left; vertical-align: top;\">Last Update:</th>\r\n                                <td style=\"text-align: left; vertical-align: top;\">${data.properties.lastupdate}</td>\r\n                            </tr>\r\n                            </table><br>\r\n                            <b>Description:</b> ${description}<br>\r\n                            <b>© <a href=\"https://paraglidingspots.com\" target=\"_blank\">paraglidingspots.com</a></b>\r\n                            <div class=\"modal-footer d-flex justify-content-between\">\r\n                            <div id=\"feedback-message\" class=\"text-start\"></div> <!-- Message on the left -->\r\n                            <div class=\"d-flex ms-auto\">\r\n                                <button class=\"btn btn-primary me-2\" onclick=\"showFeebackForm()\">Feedback/Correction</button>\r\n                                <button class=\"btn btn-dark close-popup\">Close</button>\r\n                            </div>\r\n                            </div>\r\n                            `;\r\n\r\n        // Apply maxWidth CSS directly to popup content if needed\r\n        popupContent += `<style>\r\n        /* Limit the height of the Swiper container */\r\n        .swiper-container {\r\n            max-height: 460px !important;\r\n            height: 460px !important;\r\n            overflow: hidden !important;\r\n        }\r\n\r\n        /* Ensure individual Swipers don't expand beyond this height */\r\n        .swiper, .swiper1, .swiper2 {\r\n            max-height: 460px !important;\r\n            height: 460px !important;\r\n            overflow: hidden !important;\r\n        }\r\n\r\n        /* Limit Swiper wrapper height */\r\n        .swiper-wrapper {\r\n            max-height: 460px !important;\r\n        }\r\n\r\n        /* Ensure Swiper slides don't stretch */\r\n        .swiper-slide {\r\n            max-height: 460px !important;\r\n            display: flex !important;\r\n            align-items: center !important; /* Keep images centered */\r\n            justify-content: center !important;\r\n        }\r\n\r\n        /* Prevent images from exceeding the swiper height */\r\n        .swiper-slide img {\r\n            max-height: 100% !important;\r\n            width: auto !important;\r\n        }\r\n        \r\n        /* Keep the overall popup size unchanged */\r\n        .leaflet-popup-content {\r\n            max-height: 780px !important; /* Keep original popup height */\r\n            overflow-y: auto; /* Allow scrolling inside the popup if needed */\r\n        }\r\n\r\n        .swiper-clear {\r\n            clear: both;\r\n            margin-bottom: 1px;\r\n        }\r\n        </style>`;\r\n\r\n        layer.setPopupContent(popupContent);\r\n\r\n        // Wait for the popup to open before initializing Swiper\r\n        setTimeout(() => {\r\n            let firstImg = document.querySelector(\".swiper1 .swiper-slide img\");\r\n            if (firstImg) {\r\n                let idImg = parseInt(firstImg.id.replace(/\\D/g, \"\"), 10) || 1;\r\n                initSwiper(idImg); // Call existing Swiper function\r\n            }\r\n    \r\n        }, 300);\r\n\r\n        setTimeout(() => {\r\n            document.querySelector(\".close-popup\").addEventListener(\"click\", function () {\r\n                map.closePopup();\r\n            });\r\n        }, 300);\r\n\r\n    } catch (error) {\r\n        console.error(\"Error fetching place details:\", error);\r\n    }\r\n}\r\n\r\nfunction showFeebackForm() {\r\n    // Cleanup any existing feedback form\r\n    if (currentFeedbackForm) {\r\n        currentFeedbackForm.remove();\r\n        currentFeedbackForm = null;\r\n    }\r\n    if (feedbackDropzone) {\r\n        feedbackDropzone.destroy();\r\n        feedbackDropzone = null;\r\n    }\r\n    // Clear previous feedback message\r\n    const messageDiv = document.getElementById(\"feedback-message\");\r\n    if (messageDiv) {\r\n        messageDiv.textContent = \"\";\r\n         messageDiv.classList.remove(\"text-success\", \"text-danger\");\r\n    }\r\n\r\n    let modalFooter = document.querySelector(\".modal-footer\");\r\n    if (modalFooter) modalFooter.style.display = \"none\";\r\n\r\n    const feedbackFormHtml = `\r\n        <div id=\"feedbackFormHtml\">\r\n            <div class=\"feedback-modal\">\r\n                <span style=\"color: #0087F7;\"><h5>Feedback for ${window.currentPlaceName}</h5></span>\r\n                <form id=\"feedbackForm\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"feedbackText\">Feedback / Correction / Comment:</label>\r\n                        <textarea id=\"feedbackText\" class=\"form-control\" required style=\"height: 130px;\"></textarea>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label>Upload Images (optional):</label>\r\n                        <div id=\"dropzoneFeedback\" class=\"dropzone mt-4 border-dashed rounded-2 min-h-0\"></div>\r\n                    </div>\r\n                    <div class=\"form-group d-flex justify-content-between\">\r\n                        <div style=\"width: 48%;\">\r\n                            <label for=\"userName\">Name:</label>\r\n                            <input type=\"text\" id=\"userName\" class=\"form-control\" required>\r\n                        </div>\r\n                        <div style=\"width: 48%;\">\r\n                            <label for=\"userEmail\">E-Mail:</label>\r\n                            <input type=\"email\" id=\"userEmail\" class=\"form-control\" required>\r\n                            <small class=\"text-danger d-none\" id=\"emailError\">Please enter a valid email address.</small>\r\n                        </div>\r\n                    </div>\r\n                    <button type=\"submit\" class=\"btn btn-success\">Submit</button>\r\n                    <button type=\"button\" class=\"btn btn-secondary\" onclick=\"cancelFeedback()\">Cancel</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    const popup = document.querySelector(\".leaflet-popup-content\");\r\n    if (popup) {\r\n        popup.insertAdjacentHTML(\"beforeend\", feedbackFormHtml);\r\n        currentFeedbackForm = document.getElementById(\"feedbackFormHtml\");\r\n\r\n        // Auto-scroll implementation\r\n        setTimeout(() => {\r\n            const popupContainer = document.querySelector(\".leaflet-popup-content\");\r\n            if (popupContainer) {\r\n                popupContainer.scrollTo({\r\n                    top: popupContainer.scrollHeight,\r\n                    behavior: 'smooth'\r\n                });\r\n            }\r\n        }, 50); // 50ms delay to ensure DOM rendering\r\n    } else {\r\n        console.error(\"Popup content not found!\");\r\n        return;\r\n    }\r\n\r\n    // Initialize Dropzone\r\n    feedbackDropzone = new Dropzone(\"#dropzoneFeedback\", {\r\n        url: \"/upload\",\r\n        autoProcessQueue: false,\r\n        maxFiles: 5,\r\n        maxFilesize: 100,\r\n        acceptedFiles: \"image/*\",\r\n        addRemoveLinks: false,\r\n        dictDefaultMessage: \"Drag & drop files here or click to upload\",\r\n        clickable: true,\r\n        init: function() {\r\n            const dzInstance = this;\r\n            this.on(\"addedfile\", function(file) {\r\n                const previewElement = file.previewElement;\r\n                const deleteIcon = document.createElement(\"img\");\r\n                deleteIcon.src = \"/assets/images/imgdelete.png\";\r\n                deleteIcon.alt = \"Delete\";\r\n                deleteIcon.classList.add(\"delete-icon\");\r\n                previewElement.querySelector(\".dz-image\").appendChild(deleteIcon);\r\n\r\n                deleteIcon.addEventListener(\"click\", function(e) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation();\r\n                    dzInstance.removeFile(file);\r\n                });\r\n            });\r\n\r\n            this.on(\"removedfile\", function(file) {\r\n                console.log(\"File removed:\", file.name);\r\n            });\r\n        }\r\n    });\r\n\r\n    // Email validation\r\n    document.getElementById(\"userEmail\").addEventListener(\"input\", function() {\r\n        const isValid = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.value);\r\n        document.getElementById(\"emailError\").classList.toggle(\"d-none\", isValid);\r\n    });\r\n\r\n    // Form submission\r\n    document.getElementById(\"feedbackForm\").addEventListener(\"submit\", async function(event) {\r\n        event.preventDefault();\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"name\", window.currentPlaceName);\r\n        formData.append(\"id\", window.currentPlaceId);\r\n        formData.append(\"strPlacemarkId\", window.currentStrPlacemarkId);    \r\n        formData.append(\"feedbackText\", document.getElementById(\"feedbackText\").value);\r\n        formData.append(\"userName\", document.getElementById(\"userName\").value);\r\n        formData.append(\"userEmail\", document.getElementById(\"userEmail\").value);\r\n\r\n        feedbackDropzone.files.forEach(file => {\r\n            formData.append(\"images\", file);\r\n        });\r\n\r\n        try {\r\n            const response = await fetch(`${process.env.APP_DOMAIN}/api/send-feedback`, {\r\n                method: \"POST\",\r\n                body: formData\r\n            });\r\n            const result = await response.json();\r\n\r\n            // Cleanup after submission\r\n            if (currentFeedbackForm) {\r\n                currentFeedbackForm.remove();\r\n                currentFeedbackForm = null;\r\n            }\r\n            if (feedbackDropzone) {\r\n                feedbackDropzone.destroy();\r\n                feedbackDropzone = null;\r\n            }\r\n\r\n            const messageDiv = document.getElementById(\"feedback-message\");\r\n            if (result.success) {\r\n                messageDiv.textContent = result.message || \"Feedback submitted successfully!\";\r\n                messageDiv.classList.remove(\"text-danger\");\r\n                messageDiv.classList.add(\"text-success\");\r\n            } else {\r\n                messageDiv.textContent = result.error || \"An error occurred.\";\r\n                messageDiv.classList.remove(\"text-success\");\r\n                messageDiv.classList.add(\"text-danger\");\r\n            }\r\n            document.querySelector(\".modal-footer\").style.display = \"flex\";\r\n        } catch (error) {\r\n            console.error(\"Submission error:\", error);\r\n        }\r\n    });\r\n}\r\n\r\nfunction cancelFeedback() {\r\n    // Cleanup feedback form and Dropzone\r\n    if (currentFeedbackForm) {\r\n        currentFeedbackForm.remove();\r\n        currentFeedbackForm = null;\r\n    }\r\n    if (feedbackDropzone) {\r\n        feedbackDropzone.destroy();\r\n        feedbackDropzone = null;\r\n    }\r\n    document.querySelector(\".modal-footer\").style.display = \"flex\";\r\n}\r\n\r\n// Export functions\r\nexport {\r\n    changeSwiper,\r\n    initSwiper,\r\n    getAngleRange,\r\n    loadPlaceDetails,\r\n    showFeebackForm,\r\n    cancelFeedback\r\n};","import { \r\n    getAngleRange, \r\n    loadPlaceDetails, \r\n    showFeebackForm, \r\n    cancelFeedback \r\n} from './spots-helper.js';\r\n\r\n// Use a module initialization function that waits for map to be ready\r\nexport function initSpotPG() {\r\n    // Check if map and placesLayerPG are available in the window object\r\n    if (!window.map || !window.placesLayerPG) {\r\n        console.error(\"Map or placesLayerPG is not defined. Retrying in 500ms...\");\r\n        setTimeout(initSpotPG, 500);\r\n        return;\r\n    }\r\n\r\n    console.log(\"Initializing PG spots module...\");\r\n\r\n    // Expose needed functions to global scope for event handlers\r\n    window.showFeebackForm = showFeebackForm;\r\n    window.cancelFeedback = cancelFeedback;\r\n\r\n    // Create cluster group and nest it in the existing layer group\r\n    const clusterGroup = L.markerClusterGroup({\r\n        disableClusteringAtZoom: 9,\r\n        spiderfyOnMaxZoom: true,\r\n        showCoverageOnHover: true,\r\n        zoomToBoundsOnClick: true,\r\n        maxClusterRadius: 250,\r\n        iconCreateFunction: function(cluster) {\r\n            return L.divIcon({ \r\n                html: `<div class=\"cluster-marker\">${cluster.getChildCount()}</div>`,\r\n                className: 'pg-cluster-icon',\r\n                iconSize: L.point(30, 30)\r\n            });\r\n        }\r\n    });\r\n\r\n    window.placesLayerPG.addLayer(clusterGroup);\r\n\r\n    // Track current fetch controller to allow cancellation\r\n    let currentFetchController = null;\r\n    // Add debounce timer\r\n    let fetchDebounceTimer = null;\r\n    const DEBOUNCE_DELAY = 300; // ms\r\n\r\n    // Fetch places without descriptions\r\n    function fetchPlaces() {\r\n        // Only proceed if the layer is on the map\r\n        if (!window.map.hasLayer(window.placesLayerPG)) {\r\n            console.log(\"PG layer not visible, skipping fetch\");\r\n            return;\r\n        }\r\n        \r\n        // Clear any pending debounce\r\n        if (fetchDebounceTimer) {\r\n            clearTimeout(fetchDebounceTimer);\r\n        }\r\n        \r\n        // Debounce the fetch call to prevent rapid successive requests\r\n        fetchDebounceTimer = setTimeout(() => {\r\n            // Cancel any ongoing fetch\r\n            if (currentFetchController) {\r\n                currentFetchController.abort();\r\n            }\r\n\r\n            // Create a new controller for this fetch\r\n            currentFetchController = new AbortController();\r\n            const signal = currentFetchController.signal;\r\n\r\n            const bounds = window.map.getBounds();\r\n            const nw_lat = bounds.getNorthWest().lat;\r\n            const nw_lng = bounds.getNorthWest().lng;\r\n            const se_lat = bounds.getSouthEast().lat;\r\n            const se_lng = bounds.getSouthEast().lng;\r\n\r\n            fetch(`${process.env.APP_DOMAIN}/api/places?nw_lat=${nw_lat}&nw_lng=${nw_lng}&se_lat=${se_lat}&se_lng=${se_lng}&type=TO&type=TOW&type=TH`, {\r\n                signal // Attach the abort signal to the fetch call\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    // Only process if this is still the active request\r\n                    if (signal.aborted) return;\r\n                    \r\n                    clusterGroup.clearLayers();\r\n\r\n                    L.geoJSON(data, {\r\n                        pointToLayer: function (feature, latlng) {\r\n                            return L.marker(latlng, {\r\n                                icon: L.canvasIcon({\r\n                                    iconSize: [50, 50],\r\n                                    iconAnchor: [15, 15],\r\n                                    drawIcon: function (icon, type) {\r\n                                        if (type === 'icon') {\r\n                                            var ctx = icon.getContext('2d');\r\n                                            var size = L.point(this.options.iconSize);\r\n                                            var center = L.point(size.x / 2, size.y / 2);\r\n                                            ctx.clearRect(0, 0, size.x, size.y);\r\n\r\n                                            let direction = feature.properties.direction || \"\";\r\n                                            let angleRanges = getAngleRange(direction);\r\n\r\n                                            ctx.beginPath();\r\n                                            angleRanges.forEach(([start, end]) => {\r\n                                                ctx.moveTo(center.x, center.y);\r\n                                                ctx.arc(center.x, center.y, center.x, (start - 90) * Math.PI / 180, (end - 90) * Math.PI / 180, false);\r\n                                                ctx.lineTo(center.x, center.y);\r\n                                            });\r\n                                            ctx.fillStyle = 'orange';\r\n                                            ctx.fill();\r\n                                            ctx.closePath();\r\n\r\n                                            ctx.beginPath();\r\n                                            ctx.arc(center.x, center.y, center.x / 4, 0, Math.PI * 2);\r\n                                            ctx.fillStyle = 'green';\r\n                                            ctx.fill();\r\n                                            ctx.closePath();\r\n                                        }\r\n                                    }\r\n                                })\r\n                            });\r\n                        },\r\n                        onEachFeature: function (feature, layer) {\r\n                            if (feature.properties) {\r\n                                let popupContent = `<b>${feature.properties.name}</b><br>\r\n                                                    Type: ${feature.properties.type}<br>\r\n                                                    Direction: ${feature.properties.direction}<br>\r\n                                                    <i>Loading details...</i>`;\r\n\r\n                                let responsivePopup = L.responsivePopup({\r\n                                    hasTip: true,\r\n                                    autoPan: false,\r\n                                    offset: [15, 25],\r\n                                    maxWidth: 900,\r\n                                    maxHeight: 780\r\n                                }).setContent(popupContent);\r\n\r\n                                layer.bindPopup(responsivePopup);\r\n\r\n                                layer.on(\"popupopen\", async function () {\r\n                                    await loadPlaceDetails(layer, feature.properties.id);\r\n                                });\r\n                            }\r\n                            \r\n                            clusterGroup.addLayer(layer);\r\n                        }\r\n                    });\r\n                    \r\n                    // Clear the controller reference when done\r\n                    currentFetchController = null;\r\n                })\r\n                .catch(error => {\r\n                    // Don't log aborted requests as errors\r\n                    if (error.name !== 'AbortError') {\r\n                        console.error(\"Error fetching PG places:\", error);\r\n                    }\r\n                });\r\n        }, DEBOUNCE_DELAY);\r\n    }\r\n\r\n    // IMPORTANT: Expose fetchPlaces to window so it can be called from index.js\r\n    window.fetchPlacesPG = fetchPlaces;\r\n\r\n    // REMOVED: Don't attach moveend listener here anymore\r\n    // The central handler in index.js will call fetchPlacesPG when needed\r\n\r\n    // Initial load only if layer is visible\r\n    if (window.map.hasLayer(window.placesLayerPG)) {\r\n        fetchPlaces();\r\n    }\r\n    \r\n    console.log(\"PG spots module initialized\");\r\n}\r\n\r\n// Listen for map initialization event\r\ndocument.addEventListener(\"map_initialized\", function() {\r\n    console.log(\"Map initialized event received in PG spots module\");\r\n    setTimeout(initSpotPG, 100);\r\n});\r\n\r\n// Alternative initialization approach\r\nsetTimeout(() => {\r\n    if (window.mapInitialized) {\r\n        console.log(\"Backup initialization for PG spots module\");\r\n        initSpotPG();\r\n    }\r\n}, 1000);","import { \r\n    getAngleRange, \r\n    loadPlaceDetails, \r\n    showFeebackForm, \r\n    cancelFeedback \r\n} from './spots-helper.js';\r\n\r\n// Use a module initialization function that waits for map to be ready\r\nexport function initSpotHG() {\r\n    // Check if map and placesLayerHG are available in the window object\r\n    if (!window.map || !window.placesLayerHG) {\r\n        console.error(\"Map or placesLayerHG is not defined. Retrying in 500ms...\");\r\n        setTimeout(initSpotHG, 500);\r\n        return;\r\n    }\r\n\r\n    console.log(\"Initializing HG spots module...\");\r\n\r\n    // Expose needed functions to global scope for event handlers\r\n    window.showFeebackForm = showFeebackForm;\r\n    window.cancelFeedback = cancelFeedback;\r\n\r\n    // Create cluster group and nest it in the existing layer group\r\n    const clusterGroup = L.markerClusterGroup({\r\n        disableClusteringAtZoom: 9,\r\n        spiderfyOnMaxZoom: true,\r\n        showCoverageOnHover: true,\r\n        zoomToBoundsOnClick: true,\r\n        maxClusterRadius: 250,\r\n        iconCreateFunction: function(cluster) {\r\n            return L.divIcon({ \r\n                html: `<div class=\"cluster-marker\">${cluster.getChildCount()}</div>`,\r\n                className: 'hg-cluster-icon',\r\n                iconSize: L.point(30, 30)\r\n            });\r\n        }\r\n    });\r\n\r\n    window.placesLayerHG.addLayer(clusterGroup);\r\n\r\n    // Track current fetch controller to allow cancellation\r\n    let currentFetchController = null;\r\n    // Add debounce timer\r\n    let fetchDebounceTimer = null;\r\n    const DEBOUNCE_DELAY = 300; // ms\r\n\r\n    // Fetch places without descriptions\r\n    function fetchPlaces() {\r\n        // Clear any pending debounce\r\n        if (fetchDebounceTimer) {\r\n            clearTimeout(fetchDebounceTimer);\r\n        }\r\n        \r\n        // Debounce the fetch call to prevent rapid successive requests\r\n        fetchDebounceTimer = setTimeout(() => {\r\n            // Cancel any ongoing fetch\r\n            if (currentFetchController) {\r\n                currentFetchController.abort();\r\n            }\r\n\r\n            // Create a new controller for this fetch\r\n            currentFetchController = new AbortController();\r\n            const signal = currentFetchController.signal;\r\n\r\n            const bounds = window.map.getBounds();\r\n            const nw_lat = bounds.getNorthWest().lat;\r\n            const nw_lng = bounds.getNorthWest().lng;\r\n            const se_lat = bounds.getSouthEast().lat;\r\n            const se_lng = bounds.getSouthEast().lng;\r\n\r\n            fetch(`${process.env.APP_DOMAIN}/api/places?nw_lat=${nw_lat}&nw_lng=${nw_lng}&se_lat=${se_lat}&se_lng=${se_lng}&type=TO-HG&type=TOW-HG`, {\r\n                signal // Attach the abort signal to the fetch call\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    // Only process if this is still the active request\r\n                    if (signal.aborted) return;\r\n                    \r\n                    clusterGroup.clearLayers();\r\n\r\n                    L.geoJSON(data, {\r\n                        pointToLayer: function (feature, latlng) {\r\n                            return L.marker(latlng, {\r\n                                icon: L.canvasIcon({\r\n                                    iconSize: [50, 50],\r\n                                    iconAnchor: [15, 15],\r\n                                    drawIcon: function (icon, type) {\r\n                                        if (type === 'icon') {\r\n                                            var ctx = icon.getContext('2d');\r\n                                            var size = L.point(this.options.iconSize);\r\n                                            var center = L.point(size.x / 2, size.y / 2);\r\n                                            ctx.clearRect(0, 0, size.x, size.y);\r\n\r\n                                            let direction = feature.properties.direction || \"\";\r\n                                            let angleRanges = getAngleRange(direction);\r\n\r\n                                            ctx.beginPath();\r\n                                            angleRanges.forEach(([start, end]) => {\r\n                                                ctx.moveTo(center.x, center.y);\r\n                                                ctx.arc(center.x, center.y, center.x, (start - 90) * Math.PI / 180, (end - 90) * Math.PI / 180, false);\r\n                                                ctx.lineTo(center.x, center.y);\r\n                                            });\r\n                                            ctx.fillStyle = 'orange';\r\n                                            ctx.fill();\r\n                                            ctx.closePath();\r\n\r\n                                            ctx.beginPath();\r\n                                            ctx.arc(center.x, center.y, center.x / 4, 0, Math.PI * 2);\r\n                                            ctx.fillStyle = 'green';\r\n                                            ctx.fill();\r\n                                            ctx.closePath();\r\n                                        }\r\n                                    }\r\n                                })\r\n                            });\r\n                        },\r\n                        onEachFeature: function (feature, layer) {\r\n                            if (feature.properties) {\r\n                                let popupContent = `<b>${feature.properties.name}</b><br>\r\n                                                    Type: ${feature.properties.type}<br>\r\n                                                    Direction: ${feature.properties.direction}<br>\r\n                                                    <i>Loading details...</i>`;\r\n\r\n                                let responsivePopup = L.responsivePopup({\r\n                                    hasTip: true,\r\n                                    autoPan: false,\r\n                                    offset: [15, 25],\r\n                                    maxWidth: 900,\r\n                                    maxHeight: 780\r\n                                }).setContent(popupContent);\r\n\r\n                                layer.bindPopup(responsivePopup);\r\n\r\n                                layer.on(\"popupopen\", async function () {\r\n                                    await loadPlaceDetails(layer, feature.properties.id);\r\n                                });\r\n                            }\r\n                            \r\n                            clusterGroup.addLayer(layer);\r\n                        }\r\n                    });\r\n                    \r\n                    // Clear the controller reference when done\r\n                    currentFetchController = null;\r\n                })\r\n                .catch(error => {\r\n                    // Don't log aborted requests as errors\r\n                    if (error.name !== 'AbortError') {\r\n                        console.error(\"Error fetching HG places:\", error);\r\n                    }\r\n                });\r\n        }, DEBOUNCE_DELAY);\r\n    }\r\n\r\n    // IMPORTANT: Expose fetchPlaces to window so it can be called from index.js\r\n    window.fetchPlacesHG = fetchPlaces;\r\n\r\n    // REMOVED: Don't attach moveend listener here anymore\r\n    // The central handler in index.js will call fetchPlacesPG when needed\r\n\r\n    // Initial load only if layer is visible\r\n    if (window.map.hasLayer(window.placesLayerHG)) {\r\n        fetchPlaces();\r\n    }\r\n    \r\n    console.log(\"PG spots module initialized\");\r\n}\r\n\r\n// Listen for map initialization event\r\ndocument.addEventListener(\"map_initialized\", function() {\r\n    console.log(\"Map initialized event received in HG spots module\");\r\n    setTimeout(initSpotHG, 100);\r\n});\r\n\r\n// Alternative initialization approach\r\nsetTimeout(() => {\r\n    if (window.mapInitialized) {\r\n        console.log(\"Backup initialization for HG spots module\");\r\n        initSpotHG();\r\n    }\r\n}, 1000);","import { \r\n    getAngleRange, \r\n    loadPlaceDetails, \r\n    showFeebackForm, \r\n    cancelFeedback \r\n} from './spots-helper.js';\r\n\r\n// Use a module initialization function that waits for map to be ready\r\nexport function initSpotLZ() {\r\n    if (!window.map || !window.placesLayerLZ) {\r\n        setTimeout(initSpotLZ, 500);\r\n        return;\r\n    }\r\n\r\n    console.log(\"Initializing LZ spots module...\");\r\n\r\n    // Create cluster group and nest it in the existing layer group\r\n    const clusterGroup = L.markerClusterGroup({\r\n        disableClusteringAtZoom: 9,\r\n        spiderfyOnMaxZoom: true,\r\n        showCoverageOnHover: true,\r\n        zoomToBoundsOnClick: true,\r\n        maxClusterRadius: 250,\r\n        iconCreateFunction: function(cluster) {\r\n            return L.divIcon({ \r\n                html: `<div class=\"cluster-marker\">${cluster.getChildCount()}</div>`,\r\n                className: 'lz-cluster-icon',\r\n                iconSize: L.point(30, 30)\r\n            });\r\n        }\r\n    });\r\n\r\n    window.placesLayerLZ.addLayer(clusterGroup); // Add cluster group to the layer group\r\n\r\n    // Track current fetch controller to allow cancellation\r\n    let currentFetchController = null;\r\n    // Add debounce timer\r\n    let fetchDebounceTimer = null;\r\n    const DEBOUNCE_DELAY = 300; // ms\r\n\r\n    // Update fetchPlaces to use clusterGroup\r\n    function fetchPlaces() {\r\n        // Clear any pending debounce\r\n        if (fetchDebounceTimer) {\r\n            clearTimeout(fetchDebounceTimer);\r\n        }\r\n        \r\n        // Debounce the fetch call to prevent rapid successive requests\r\n        fetchDebounceTimer = setTimeout(() => {\r\n            // Cancel any ongoing fetch\r\n            if (currentFetchController) {\r\n                currentFetchController.abort();\r\n            }\r\n\r\n            // Create a new controller for this fetch\r\n            currentFetchController = new AbortController();\r\n            const signal = currentFetchController.signal;\r\n            \r\n            const bounds = window.map.getBounds();\r\n            const nw_lat = bounds.getNorthWest().lat;\r\n            const nw_lng = bounds.getNorthWest().lng;\r\n            const se_lat = bounds.getSouthEast().lat;\r\n            const se_lng = bounds.getSouthEast().lng;\r\n\r\n            fetch(`${process.env.APP_DOMAIN}/api/places?nw_lat=${nw_lat}&nw_lng=${nw_lng}&se_lat=${se_lat}&se_lng=${se_lng}&type=LZ`, {\r\n                signal // Attach the abort signal to the fetch call\r\n            })\r\n                .then(response => response.json())\r\n                .then(data => {\r\n                    // Only process if this is still the active request\r\n                    if (signal.aborted) return;\r\n                    \r\n                    clusterGroup.clearLayers(); // Clear the cluster group\r\n\r\n                    L.geoJSON(data, {\r\n                        pointToLayer: function (feature, latlng) {\r\n                            return L.marker(latlng, {\r\n                                icon: L.icon({\r\n                                    iconUrl: '../assets/images/windsock.png', // Replace with the actual path to your PNG\r\n                                    iconSize: [20, 20], // Adjust size as needed\r\n                                    iconAnchor: [20, 20] // Adjust anchor to center the image properly\r\n                                })\r\n                            });\r\n                        },\r\n                        onEachFeature: function (feature, layer) {\r\n                            if (feature.properties) {\r\n                                let popupContent = `<b>${feature.properties.name}</b><br>\r\n                                                    Type: ${feature.properties.type}<br>\r\n                                                    Direction: ${feature.properties.direction}<br>\r\n                                                    <i>Loading details...</i>`;\r\n\r\n                                let responsivePopup = L.responsivePopup({\r\n                                    hasTip: true,\r\n                                    autoPan: false,\r\n                                    offset: [15, 25],\r\n                                    maxWidth: 900,\r\n                                    maxHeight: 780\r\n                                }).setContent(popupContent);\r\n\r\n                                layer.bindPopup(responsivePopup);\r\n\r\n                                // Fetch details when popup is opened\r\n                                layer.on(\"popupopen\", async function () {\r\n                                    await loadPlaceDetails(layer, feature.properties.id);\r\n                                });\r\n                               \r\n                            }\r\n                            \r\n                            clusterGroup.addLayer(layer); // Add to clusterGroup\r\n                        }\r\n                    });\r\n                    \r\n                    // Clear the controller reference when done\r\n                    currentFetchController = null;\r\n                })\r\n                .catch(error => {\r\n                    // Don't log aborted requests as errors\r\n                    if (error.name !== 'AbortError') {\r\n                        console.error(\"Error fetching LZ places:\", error);\r\n                    }\r\n                });\r\n        }, DEBOUNCE_DELAY);\r\n    }\r\n    // IMPORTANT: Expose fetchPlaces to window so it can be called from index.js\r\n    window.fetchPlacesLZ = fetchPlaces;\r\n\r\n    // REMOVED: Don't attach moveend listener here anymore\r\n    // The central handler in index.js will call fetchPlacesPG when needed\r\n\r\n    // Initial load only if layer is visible\r\n    if (window.map.hasLayer(window.placesLayerLZ)) {\r\n        fetchPlaces();\r\n    }\r\n    \r\n    console.log(\"PG spots module initialized\");\r\n}\r\n\r\n// Listen for map initialization event\r\ndocument.addEventListener(\"map_initialized\", function() {\r\n    console.log(\"Map initialized event received in LZ spots module\");\r\n    // Give a slight delay to ensure map is fully ready\r\n    setTimeout(initSpotLZ, 100);\r\n});\r\n\r\n// Alternative initialization approach - also try to init if we missed the event\r\nsetTimeout(() => {\r\n    if (window.mapInitialized) {\r\n        console.log(\"Backup initialization for LZ spots module\");\r\n        initSpotLZ();\r\n    }\r\n}, 1000);","// obstacles.js\r\nlet obstacleClickHandler = null;\r\nlet obstacleDebounceTimer;\r\n\r\n// Initialize the obstacle layer\r\nlet obstacleLayer = L.layerGroup({\r\n    attribution: 'XContest&copy; <a href=\"https://xcontest.org\">XContest</a>'\r\n});\r\nwindow.obstacleLayer = obstacleLayer;\r\n\r\nfunction fetchObstacles() {\r\n  if (!window.map) {\r\n    console.error(\"Map not initialized yet\");\r\n    return;\r\n  }\r\n\r\n  // Get current map bounds\r\n  const bounds = window.map.getBounds();\r\n  const nw = bounds.getNorthWest();\r\n  const se = bounds.getSouthEast();\r\n\r\n  const apiUrl = `${process.env.APP_DOMAIN}/api/obstacles?nw_lat=${nw.lat}&nw_lng=${nw.lng}&se_lat=${se.lat}&se_lng=${se.lng}`;\r\n\r\n  // Clear previous layers\r\n  obstacleLayer.clearLayers();\r\n\r\n  fetch(apiUrl)\r\n    .then(response => response.json())\r\n    .then(geoJson => {\r\n      const obstacles = [];\r\n\r\n      geoJson.features.forEach(feature => {\r\n        if (feature.geometry.type === \"LineString\") {\r\n          // Convert coordinates to LatLng format [lat, lng]\r\n          const coords = feature.geometry.coordinates.map(coord => [\r\n            coord[1],\r\n            coord[0]\r\n          ]);\r\n\r\n          // Create polyline with styling from properties\r\n          const polyline = L.polyline(coords, {\r\n            color: feature.properties.strokeColor || \"#ff0000\",\r\n            weight: feature.properties.strokeWeight || 2\r\n          });\r\n\r\n          // Store obstacle data with its polyline\r\n          obstacles.push({ polyline, data: feature.properties });\r\n\r\n          // Add to layer group\r\n          polyline.addTo(obstacleLayer);\r\n\r\n          // Add popup content\r\n          polyline.bindPopup(() => {\r\n            const content = [];\r\n            if (feature.properties.name) content.push(`<b>${feature.properties.name}</b>`);\r\n            if (feature.properties.type) content.push(`Type: ${feature.properties.type}`);\r\n            if (feature.properties.description) content.push(`Description: ${feature.properties.description}`);\r\n            if (feature.properties.maxAgl) content.push(`Max AG: ${feature.properties.maxAgl}m`);\r\n            \r\n            return content.join(\"<br>\");\r\n          });\r\n        }\r\n      });\r\n\r\n      console.log(`Added ${obstacles.length} obstacles to the map`);\r\n\r\n      // Remove existing click handler if any\r\n      if (obstacleClickHandler) {\r\n        window.map.off(\"click\", obstacleClickHandler);\r\n      }\r\n\r\n      // Add new click handler for obstacles\r\n      obstacleClickHandler = function(e) {\r\n        if (!window.map.hasLayer(obstacleLayer)) return;\r\n\r\n        const clickedPoint = e.latlng;\r\n        const clickedObstacles = [];\r\n\r\n        obstacles.forEach(({ polyline, data }) => {\r\n          if (polyline.getBounds().contains(clickedPoint)) {\r\n            clickedObstacles.push(data);\r\n          }\r\n        });\r\n\r\n        if (clickedObstacles.length > 0) {\r\n          const popupContent = clickedObstacles.map(obs => `\r\n            ${obs.name ? `<b>${obs.name}</b><br>` : ''}\r\n            ${obs.type ? `Type: ${obs.type}<br>` : ''}\r\n            ${obs.description ? `Description: ${obs.description}<br>` : ''}\r\n            ${obs.maxAgl ? `Max AG: ${obs.maxAgl}m<br>` : ''}\r\n          `).join(\"<hr>\");\r\n\r\n          L.popup()\r\n            .setLatLng(clickedPoint)\r\n            .setContent(popupContent)\r\n            .openOn(window.map);\r\n        }\r\n      };\r\n\r\n      window.map.on(\"click\", obstacleClickHandler);\r\n    })\r\n    .catch(error => console.error(\"Error fetching obstacles:\", error));\r\n}\r\n\r\n// Export the fetch function\r\nwindow.fetchObstacles = fetchObstacles;\r\n\r\n\r\n","\r\nimport './L.Control.Layers.Tree.js';\r\nimport '../css/L.Control.Layers.Tree.css';\r\n\r\nimport './leaflet.responsive.popup.js';\r\nimport './leaflet.responsive.popup.css';\r\n\r\nimport '../css/styles.css';\r\nimport InfoControl from './../../../components/InfoControl.js';\r\nimport moment from 'moment';\r\nimport 'moment-timezone';\r\n\r\nimport './../../../components/airspaces.js';\r\nimport '../../../components/deprecated/airspaces-gliding.js';\r\nimport '../../../components/deprecated/airspaces-notam.js';\r\nimport './../../../components/airspaces-xc.js';\r\nimport './../../../components/windstations-simple.js';\r\nimport '../../../components/spots-pg.js';\r\nimport '../../../components/spots-hg.js';\r\nimport '../../../components/spots-lz.js';\r\nimport '../../../components/obstacles.js';\r\n\r\n\r\n// Initialize map and make necessary objects globally available\r\nfunction initMap() {\r\n  // Create the map object and make it globally accessible\r\n  window.map = L.map('map', {\r\n      center: [50, 6],\r\n      zoom: 11,\r\n      zoomControl: false,\r\n      layers: [] \r\n  });\r\n  \r\n  L.control.zoom({\r\n      position: 'bottomright',\r\n  }).addTo(window.map);\r\n\r\n  // Base Layers\r\n  var awgTerrain = L.tileLayer('https://tile.jawg.io/jawg-terrain/{z}/{x}/{y}{r}.png?access-token=qBDXRu1KSlZGhx4ROlceBD9hcxmrumL34oj29tUkzDVkafqx08tFWPeRNb0KSoKa', {\r\n      attribution: 'Jawg.io terrain'\r\n  }).addTo(window.map);\r\n  \r\n  var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '© OpenStreetMap'\r\n  });\r\n  \r\n  var xcontest = L.tileLayer('https://topo.xcontest.app/elev/{z}/{x}/{y}.jpg', {\r\n      attribution: 'XContest&copy; <a href=\"https://www.xcontest.org\">XContest</a>',\r\n      className: 'xcontest-layer'\r\n  });\r\n\r\n\r\n  // MapLibre GL layer\r\n  var mapTilerTerrain = L.mapboxGL({\r\n      style: '/assets/maps/maptiler_terrain_wob_testxc.json',\r\n      apiKey: \"c49iG8J3xvAkgCSZ8M8v\",\r\n      className: 'xcmap-layer',\r\n      attribution: 'MapTiler Terrain'\r\n  });\r\n  \r\n  var sat = L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',{\r\n      attribution: 'Map data: Google',\r\n      maxZoom: 20,\r\n      subdomains:['mt0','mt1','mt2','mt3']\r\n  });\r\n\r\n  var mbsat = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{\r\n    attribution: '© Esri',\r\n    id: 'MapID',\r\n  });\r\n\r\n  var mapTilerTerrainOverlay = L.mapboxGL({\r\n    style: '/assets/maps/maptiler_terrain_wob_testxc.json',\r\n    apiKey: \"c49iG8J3xvAkgCSZ8M8v\",\r\n    className: 'xcmap-layer satellite-overlay',\r\n    attribution: 'MapTiler Terrain'\r\n});\r\n\r\n// Create a simplified contour overlay specifically for use with satellite\r\nvar contourOverlay = L.tileLayer('https://api.maptiler.com/tiles/contours/{z}/{x}/{y}.pbf?key=c49iG8J3xvAkgCSZ8M8v', {\r\n  attribution: 'MapTiler',\r\n  opacity: 0.8,\r\n  className: 'contour-overlay',\r\n  style: {\r\n      color: '#ffffff',\r\n      weight: 1,\r\n      opacity: 0.8\r\n  }\r\n});\r\n  // Layer groups - make them globally accessible\r\n  window.windLayer = L.layerGroup().addTo(window.map);\r\n  window.oaipMap = L.tileLayer(`https://a.api.tiles.openaip.net/api/data/openaip/{z}/{x}/{y}.png?apiKey=${process.env.OAIP_KEY}`, {\r\n      attribution: 'OpenAIP&copy; <a href=\"https://www.openaip.net\">OpenAIP</a>',\r\n      className: 'oaip-layer'\r\n  });\r\n  window.airspaceEFG = L.layerGroup([], {\r\n    attribution: 'OpenAIP&copy; <a href=\"https://www.openaip.net\">OpenAIP</a>',\r\n  });\r\n  window.airspaceGliding = L.layerGroup([], {\r\n    attribution: 'OpenAIP&copy; <a href=\"https://www.openaip.net\">OpenAIP</a>',\r\n  });\r\n  window.airspaceNotam = L.layerGroup([], {\r\n    attribution: 'OpenAIP&copy; <a href=\"https://www.openaip.net\">OpenAIP</a>',\r\n  });\r\n  window.airspaceXC = L.layerGroup([], {\r\n    attribution: 'XContest&copy; <a href=\"https://xcontest.org\">XContest</a>',\r\n  });\r\n\r\n  window.placesLayerPG = L.layerGroup( [], {\r\n    attribution: '&copy; <a href=\"https://paraglidingspots.com\">paraglidingspots.com</a>',\r\n  }); \r\n  window.placesLayerHG = L.layerGroup([], {\r\n    attribution: '&copy; <a href=\"https://paraglidingspots.com\">paraglidingspots.com</a>',\r\n  }); \r\n  window.placesLayerLZ = L.layerGroup([], {\r\n    attribution: '&copy; <a href=\"https://paraglidingspots.com\">paraglidingspots.com</a>',\r\n  });\r\n\r\n  function debugMapLayers() {\r\n    console.log(\"Current map layers:\");\r\n    window.map.eachLayer(function(layer) {\r\n        console.log(layer);\r\n    });\r\n  }\r\n\r\n  // Generate dynamic airspace time options\r\n  const airspaceTimeOptions = (() => {\r\n    let options = '';\r\n    for (let i = 0; i <= 6; i++) {\r\n      const date = moment().add(i, 'days');\r\n      const dayName = date.format('ddd');\r\n      const dateValue = date.format('YYYY-MM-DD');\r\n      options += `<option value=\"${dateValue}\" ${i === 0 ? 'selected' : ''}>${\r\n        i === 0 ? `Today` : dayName\r\n      }</option>`;\r\n    }\r\n    return options;  // Removed the '+ '<option value=\"All\">All</option>''\r\n  })();\r\n\r\n\r\n  // Tree structure\r\n  var baseTree = {\r\n    label: 'Base Maps',\r\n    children: [\r\n        { label: 'Terrain', layer: awgTerrain },\r\n        { label: 'XContest', layer: L.layerGroup([xcontest, mapTilerTerrain])},\r\n        { label: 'OpenStreetMap', layer: osm },\r\n        { label: 'Satellite',  layer: sat },\r\n    ]\r\n};\r\n\r\n  var overlayTree = {\r\n      label: 'Overlays',\r\n      children: [\r\n          { label: 'Wind Stations', \r\n            children: [\r\n              { label: 'Wind Stations', layer: window.windLayer, checked: true  },\r\n          ]\r\n          },\r\n\r\n          { label: 'Spots',              \r\n              children: [\r\n                  { label: 'Take-off PG', layer: window.placesLayerPG },\r\n                  { label: 'Take-off HG', layer: window.placesLayerHG },\r\n                  { label: 'Landing Zones', layer: window.placesLayerLZ },\r\n              ]\r\n          },\r\n          { label: 'Airspaces', \r\n              children: [\r\n                      { \r\n                        html: `\r\n                            <div class=\"airspace-time-control\">\r\n                                Active: \r\n                                <select class=\"airspace-time-select\" id=\"airspaceTime\">\r\n                                    ${airspaceTimeOptions}\r\n                                </select>\r\n                                          </div>\r\n                                      `\r\n                      },\r\n                      { \r\n                      html: `\r\n                          <div class=\"airspace-limit-control\">\r\n                              ↧ below: \r\n                              <select class=\"lower-limit-select\" id=\"airspaceLowerLimit\">\r\n                                  <option value=\"2000\">2000m</option>\r\n                                  <option value=\"2500\">2500m</option>\r\n                                  <option value=\"3000\" selected>3000m</option>\r\n                                  <option value=\"3500\">3500m</option>                        \r\n                                  <option value=\"4000\">4000m</option>\r\n                                  <option value=\"4500\">4500m</option>\r\n                              </select>\r\n                          </div>\r\n                      `\r\n                      },\r\n                  // { label: 'Airspaces', layer: window.airspaceEFG },\r\n                  { label: 'Airspaces', layer: window.airspaceXC },\r\n                  { label: 'Obstacles', layer: window.obstacleLayer },\r\n                  { label: 'OpenAIP Map', layer: window.oaipMap},\r\n              ]\r\n          },\r\n      ]\r\n  };\r\n\r\n\r\n  new InfoControl({ position: 'bottomright' }).addTo(window.map);\r\n\r\n  // Add logo control to the top left corner\r\n  L.Control.Logo = L.Control.extend({\r\n    onAdd: function(map) {\r\n      const container = L.DomUtil.create('div', 'leaflet-control-logo');\r\n      const img = L.DomUtil.create('img', 'logo-image', container);\r\n      img.src = '/assets/images/XCmapsLogo.png';\r\n      img.alt = 'XCmaps Logo';\r\n      img.style.width = '120px'; // Adjust size as needed\r\n      img.style.height = 'auto';\r\n      \r\n      // Prevent clicks on the logo from propagating to the map\r\n      L.DomEvent.disableClickPropagation(container);\r\n      \r\n      return container;\r\n    }\r\n  });\r\n  \r\n  L.control.logo = function(opts) {\r\n    return new L.Control.Logo(opts);\r\n  };\r\n  \r\n  // Add the logo control to the map\r\n  L.control.logo({ position: 'topleft' }).addTo(window.map);\r\n  \r\n  // Add locate control\r\n  var lc = L.control\r\n      .locate({\r\n          drawCircle: false,\r\n          keepCurrentZoomLevel: true,\r\n          position: 'bottomright',\r\n          icon: 'locate',\r\n          iconLoading: 'loading',\r\n          iconElementTag: 'div'\r\n      }).addTo(window.map);\r\n\r\n  // Add layer control tree\r\n\r\n  var treeLayersControl = L.control.layers.tree(baseTree, overlayTree, {\r\n    namedToggle: false,\r\n    collapsed: true\r\n  }).addTo(window.map);\r\n\r\n  // Initialize with collapsed tree but expanded selected layers\r\n  treeLayersControl.collapseTree().expandSelected();\r\n  \r\n  // Add touch support for mobile devices\r\n  const layersControlContainer = treeLayersControl.getContainer();\r\n  const layersControlToggle = layersControlContainer.querySelector('.leaflet-control-layers-toggle');\r\n  \r\n  // Function to detect if device is touch-only (no hover capability)\r\n  const isTouchDevice = () => {\r\n    return (('ontouchstart' in window) ||\r\n            (navigator.maxTouchPoints > 0) ||\r\n            (navigator.msMaxTouchPoints > 0));\r\n  };\r\n  \r\n  // Add click handler for touch devices\r\n  if (isTouchDevice()) {\r\n    L.DomEvent.on(layersControlToggle, 'click', function(e) {\r\n      L.DomEvent.stopPropagation(e);\r\n      if (L.DomUtil.hasClass(layersControlContainer, 'leaflet-control-layers-expanded')) {\r\n        L.DomUtil.removeClass(layersControlContainer, 'leaflet-control-layers-expanded');\r\n      } else {\r\n        L.DomUtil.addClass(layersControlContainer, 'leaflet-control-layers-expanded');\r\n      }\r\n    });\r\n    \r\n    // Close the control when clicking outside of it\r\n    L.DomEvent.on(document, 'click', function() {\r\n      if (L.DomUtil.hasClass(layersControlContainer, 'leaflet-control-layers-expanded')) {\r\n        L.DomUtil.removeClass(layersControlContainer, 'leaflet-control-layers-expanded');\r\n      }\r\n    });\r\n    \r\n    // Prevent clicks inside the control from closing it\r\n    L.DomEvent.on(layersControlContainer, 'click', function(e) {\r\n      L.DomEvent.stopPropagation(e);\r\n    });\r\n  }\r\n  \r\n  // Central event handler for map movements\r\n  // This will be the ONLY moveend handler for fetching data\r\n  window.map.on('moveend', function() {\r\n    console.log('Map moveend event triggered');\r\n    \r\n    // Check if windLayer is on the map and fetchWindStations exists\r\n    if (window.map.hasLayer(window.windLayer) && typeof window.fetchWindStations === 'function') {\r\n      console.log('Fetching wind stations after map move...');\r\n      window.fetchWindStations();\r\n    }\r\n    \r\n    // Only trigger fetch for visible spot layers\r\n    if (window.map.hasLayer(window.placesLayerPG) && window.fetchPlacesPG) {\r\n      console.log('Fetching PG spots after map move...');\r\n      window.fetchPlacesPG();\r\n    }\r\n    \r\n    if (window.map.hasLayer(window.placesLayerHG) && window.fetchPlacesHG) {\r\n      console.log('Fetching HG spots after map move...');\r\n      window.fetchPlacesHG();\r\n    }\r\n    \r\n    if (window.map.hasLayer(window.placesLayerLZ) && window.fetchPlacesLZ) {\r\n      console.log('Fetching LZ spots after map move...');\r\n      window.fetchPlacesLZ();\r\n    }\r\n    \r\n    // Airspaces\r\n    if (window.map.hasLayer(window.airspaceEFG) && typeof window.fetchAirspaces === 'function') {\r\n      console.log('Fetching airspaces after map move...');\r\n      window.fetchAirspaces();\r\n    }\r\n    // Airspaces Gliding\r\n    if (window.map.hasLayer(window.airspaceGliding) && typeof window.fetchAirspacesGliding === 'function') {\r\n      console.log('Fetching airspaces after map move...');\r\n      window.fetchAirspacesGliding();\r\n    }\r\n    // Airspaces Notam\r\n    if (window.map.hasLayer(window.airspaceNotam) && typeof window.fetchAirspacesNotam === 'function') {\r\n      console.log('Fetching airspaces after map move...');\r\n      window.fetchAirspacesNotam();\r\n    }\r\n    // Airspaces XContest\r\n    if (window.map.hasLayer(window.airspaceXC) && typeof window.fetchAirspacesXC === 'function') {\r\n      console.log('Fetching airspaces after map move...');\r\n      window.fetchAirspacesXC();\r\n    }\r\n    // Obstacles XContest\r\n    if (window.map.hasLayer(window.obstacleLayer) && typeof window.fetchObstacles === 'function') {\r\n      console.log('Fetching airspaces after map move...');\r\n      window.fetchObstacles();\r\n    }\r\n  });\r\n\r\n  document.addEventListener('change', function(e) {\r\n    if (e.target && e.target.id === 'airspaceLowerLimit') {\r\n        console.log('Selected limit:', e.target.value);\r\n    }\r\n    // Add this new handler for the time selector\r\n    if (e.target && e.target.id === 'airspaceTime') {\r\n        console.log('Selected airspace date:', e.target.value);\r\n    }\r\n  });\r\n  \r\n  // Add layer change event listeners to fetch data when layers are added\r\n  window.map.on('layeradd', function(e) {\r\n    const layer = e.layer;\r\n    \r\n    // When a layer is added, fetch its data if needed\r\n    if (layer === window.windLayer && typeof window.fetchWindStations === 'function') {\r\n      window.fetchWindStations();\r\n    } else if (layer === window.placesLayerPG && window.fetchPlacesPG) {\r\n      window.fetchPlacesPG();\r\n    } else if (layer === window.placesLayerHG && window.fetchPlacesHG) {\r\n      window.fetchPlacesHG();\r\n    } else if (layer === window.placesLayerLZ && window.fetchPlacesLZ) {\r\n      window.fetchPlacesLZ();\r\n    } else if (layer === window.airspaceEFG && typeof window.fetchAirspaces === 'function') {\r\n      window.fetchAirspaces();\r\n    } else if (layer === window.airspaceGliding && typeof window.fetchAirspacesGliding === 'function') {\r\n      window.fetchAirspacesGliding();\r\n    } else if (layer === window.airspaceNotam && typeof window.fetchAirspacesNotam === 'function') {\r\n      window.fetchAirspacesNotam();\r\n    } else if (layer === window.airspaceXC && typeof window.fetchAirspacesXC === 'function') {\r\n      window.fetchAirspacesXC();\r\n    } else if (layer === window.obstacleLayer && typeof window.fetchObstacles === 'function') {\r\n      window.fetchObstacles();\r\n    }\r\n  });\r\n  \r\n  // Signal that the map is fully initialized\r\n  window.mapInitialized = true;\r\n  console.log(\"Map initialization complete\");\r\n  \r\n  // Trigger an event that component scripts can listen for\r\n  const mapReadyEvent = new Event('map_initialized');\r\n  document.dispatchEvent(mapReadyEvent);\r\n  console.log(\"Map initialized event dispatched\");\r\n  \r\n  return window.map;\r\n}\r\n\r\n\r\n\r\n// Wait for DOM to be fully loaded\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n  console.log(\"DOM content loaded, initializing map\");\r\n  // Initialize the map\r\n  const map = initMap();\r\n  \r\n  // Setup geolocation after map is initialized\r\n  navigator.geolocation.getCurrentPosition(position => {\r\n      console.log(\"Geolocation received\");\r\n      const userLat = position.coords.latitude;\r\n      const userLng = position.coords.longitude;\r\n      map.setView([userLat, userLng], 10);\r\n      \r\n      // Create a user location ready event\r\n      const locationReadyEvent = new CustomEvent('user_location_ready', {\r\n          detail: { lat: userLat, lng: userLng }\r\n      });\r\n      document.dispatchEvent(locationReadyEvent);\r\n      console.log(\"User location event dispatched\");\r\n  });\r\n\r\n  // Load component scripts after map is initialized\r\n  \r\n});\r\n\r\n// Special patch for initial data loading\r\ndocument.addEventListener('user_location_ready', function(e) {\r\n  console.log(\"Handling user location ready event\");\r\n  setTimeout(() => {\r\n      // Only call these functions if they exist, the map is fully initialized,\r\n      // AND their respective layers are visible\r\n      if (typeof window.fetchWindStations === 'function' && \r\n          window.mapInitialized && \r\n          window.map.hasLayer(window.windLayer)) {\r\n          try {\r\n              console.log(\"Fetching wind stations\");\r\n              window.fetchWindStations(e.detail.lat, e.detail.lng);\r\n          } catch (error) {\r\n              console.error('Error fetching wind stations:', error);\r\n          }\r\n      }\r\n      \r\n      if (typeof window.fetchAirspaces === 'function' && \r\n          window.mapInitialized && \r\n          window.map.hasLayer(window.airspaceEFG)) {\r\n          try {\r\n              console.log(\"Fetching airspaces\");\r\n              window.fetchAirspaces();\r\n          } catch (error) {\r\n              console.error('Error fetching airspaces:', error);\r\n          }\r\n      }\r\n\r\n      if (typeof window.fetchAirspacesGliding === 'function' && \r\n        window.mapInitialized && \r\n        window.map.hasLayer(window.airspaceGliding)) {\r\n        try {\r\n            console.log(\"Fetching airspaces\");\r\n            window.fetchAirspacesGliding();\r\n        } catch (error) {\r\n            console.error('Error fetching airspaces:', error);\r\n        }\r\n      }\r\n\r\n      if (typeof window.fetchAirspacesNotam === 'function' && \r\n        window.mapInitialized && \r\n        window.map.hasLayer(window.airspaceNotam)) {\r\n        try {\r\n            console.log(\"Fetching airspaces\");\r\n            window.fetchAirspacesNotam();\r\n        } catch (error) {\r\n            console.error('Error fetching airspaces:', error);\r\n        }\r\n      }\r\n\r\n      if (typeof window.fetchAirspacesXC === 'function' && \r\n        window.mapInitialized && \r\n        window.map.hasLayer(window.airspaceXC)) {\r\n        try {\r\n            console.log(\"Fetching airspaces\");\r\n            window.fetchAirspacesXC();\r\n        } catch (error) {\r\n            console.error('Error fetching airspaces:', error);\r\n        }\r\n      }\r\n\r\n      if (typeof window.fetchObstacles === 'function' && \r\n        window.mapInitialized && \r\n        window.map.hasLayer(window.obstacleLayer)) {\r\n        try {\r\n            console.log(\"Fetching obstacles\");\r\n            window.fetchObstacles();\r\n        } catch (error) {\r\n            console.error('Error fetching obstacles:', error);\r\n        }\r\n      }\r\n  }, 500); // Give a short delay to ensure all scripts are loaded\r\n});","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkXCmaps\"] = self[\"webpackChunkXCmaps\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [96], () => (__webpack_require__(5451)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","console","log","L","Control","Layers","Tree","extend","options","closedSymbol","openedSymbol","spaceSymbol","selectorBack","namedToggle","collapseAll","expandAll","labelIsSelector","_initClassesNames","this","cls","children","childrenNopad","hide","closed","opened","space","pointer","header","neverShow","node","name","label","selAllCheckbox","initialize","baseTree","overlaysTree","_scrollTop","_baseTree","_overlaysTree","Util","setOptions","prototype","call","_setTrees","setBaseTree","tree","setOverlayTree","undefined","addBaseLayer","_layer","_name","addOverlay","removeLayer","collapse","_sect","scrollTop","expand","onAdd","changeName","layer","_layersTreeName","toggle","innerHTML","ret","_container","getElementsByClassName","DomUtil","addClass","eachLayer","on","expandTree","overlay","container","_overlaysList","_baseLayersList","_applyOnTree","_localExpand","collapseTree","expandSelected","iter","el","p","parentElement","hasClass","that","removeClass","h","inputs","_layerControlInputs","getElementsByTagName","i","length","input","_getLayer","layerId","checked","_section","_form","base","overlays","iterate","output","forEach","child","forArrays","Array","isArray","noShow","_layers","off","_onLayerChange","bflat","j","_addLayer","oflat","k","_map","_update","top","it","els","_addItem","_obj","_addTreeLayout","_expandCollapseAll","_iterateTreeLayout","_checkDisabledLayers","text","fn","ctx","document","createElement","className","appendChild","tabIndex","DomEvent","type","keyCode","blur","selAllNodes","html","creator","selAll","sel","entry","insertBefore","selectAllCheckbox","_createCheckboxElement","sensible","_preventClick","splice","variable","hasLayer","radioGroup","stamp","_createRadioElement","manageSelectorsAll","push","_onInputClick","String","title","ev","stopPropagation","selectAllCheckboxes","updateSelAllCheckbox","collapsed","eventeds","eventedClasses","evented","obj","querySelector","event","selectAll","functionToCheck","select","toString","append","create","ancestor","selector","selectedAll","selectedNone","querySelectorAll","inp","indeterminate","_ev","defaultChecked","control","layers","ResponsivePopup","Popup","hasTip","_initLayout","prefix","wrapper","_wrapper","_contentNode","disableClickPropagation","disableScrollPropagation","_tipContainer","style","visibility","_tip","closeButton","_closeButton","setAttribute","href","preventDefault","close","_updatePosition","pos","latLngToLayerPoint","_latlng","basePoint","layerPointToContainerPoint","containerWidth","offsetWidth","containerHeight","offsetHeight","padding","point","autoPanPadding","paddingTL","autoPanPaddingTopLeft","paddingBR","autoPanPaddingBottomRight","mapSize","getSize","anchor","_getAnchor","offset","containerRadius","offsetX","Math","abs","x","offsetY","y","canGoTop","canGoBottom","canGoLeft","canGoRight","containerPos","subtractX","subtractY","containerLeft","containerRight","containerTop","containerBottom","subtract","tipWidth","left","getCenter","setPosition","responsivePopup","source","window","link","img","src","alt","width","height","stop","popup","autoPan","setLatLng","setContent","openOn","airspaceDebounceTimer","airspaceClickHandler","currentLowerLimit","fetchAirspaces","error","center","apiUrl","lat","toFixed","lng","encodeURIComponent","join","fetch","then","response","json","data","airspaceEFG","clearLayers","airspaces","items","airspace","icaoClass","selectedLimit","parseInt","getElementById","value","lowerLimit","lowerLimitMeters","unitCode","convertToMeters","unit","geometry","coordinates","coord","color","polygon","airspaceTypes","icaoClasses","weight","fillOpacity","addLayer","clickedPoint","latlng","overlappingAirspaces","_ref","getBounds","contains","popupContent","a","_id","getUnit","upperLimit","catch","addEventListener","body","target","newLimit","clearTimeout","setTimeout","fetchAirspacesGliding","airspaceGliding","fetchAirspacesNotam","airspaceNotam","selectedDateStr","today","Date","getFullYear","getMonth","padStart","getDate","getCurrentDateStr","fetchAirspacesXC","bounds","nw","getNorthWest","se","getSouthEast","airspaceXC","features","filteredAirspaces","includedAirspaces","userTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","selectedDateStartUTC","moment","tz","startOf","utc","toDate","feature","properties","startsWith","limit","getLimitMeters","airlower_j","isExpired","descriptions","desc","cMatch","airdescription","match","dateStr","year","substring","month","day","hour","minute","UTC","hasActiveActivation","activations","selectedDateEndUTC","endOf","activation","activationStart","activationEnd","airspaceClass","hasExpirationDate","strokeColor","strokeWeight","fillColor","pt","turf","poly","tzName","guess","zoneAbbr","format","descriptionsHtml","formatDescription","replace","airlanguage","activationsHtml","startMoment","endMoment","formatLimit","original","round","lower","upper","airupper_j","_popup","closePopup","newDate","showTab","tabId","element","isMobile","innerWidth","popupElement","closest","tab","classList","remove","add","display","targetTab","scrollIntoView","behavior","stationId","split","canvas","clientWidth","chartInstance","resize","resizeChartOnWindowResize","newIsMobile","newContainerWidth","resizeHandler","removeEventListener","fetchWindStations","nwLat","nwLng","seLat","seLng","station","marker","lon","icon","iconUrl","iconSize","iconAnchor","popupAnchor","chartData","historyTable","tableHtml","time","toLocaleTimeString","createHistoryTable","popupHtml","popupOptions","maxWidth","bindPopup","parent","justifyContent","alignItems","getContext","chartDataPointsAvg","chartDataPointsMax","Chart","datasets","borderColor","fill","pointRadius","responsive","maintainAspectRatio","animation","duration","resizeDelay","layout","right","bottom","plugins","legend","tooltip","enabled","mode","intersect","callbacks","tooltipItems","parsed","scales","displayFormats","tooltipFormat","grid","drawBorder","ticks","autoSkip","maxRotation","minRotation","maxTicksLimit","beginAtZero","camera","url","cameraImageUrl","cameraImage","cameraTabElement","testImage","Image","onload","onerror","complete","naturalWidth","feedbackDropzone","currentFeedbackForm","changeSwiper","swiperc","$","css","changeDirection","getAngleRange","direction","dirToAngle","angleRanges","part","trim","range","dir","angle","start","end","async","loadPlaceDetails","placeId","regex1","regex2","regexHeight","regexHD","regexRating","description","currentPlaceName","currentPlaceId","currentStrPlacemarkId","strPlacemarkId","rating","heightdifference","lastupdate","setPopupContent","firstImg","idImg","swiperv","swiperLoop3","swiperLoop4","Swiper","autoHeight","allowTouchMove","mousewheel","slidesPerView","loop","spaceBetween","breakpoints","scrollbar","draggable","click","iR","clickedSlide","firstChild","slideTo","transitionEnd","realIndex","initSwiper","showFeebackForm","destroy","messageDiv","textContent","modalFooter","feedbackFormHtml","insertAdjacentHTML","popupContainer","scrollTo","scrollHeight","Dropzone","autoProcessQueue","maxFiles","maxFilesize","acceptedFiles","addRemoveLinks","dictDefaultMessage","clickable","init","dzInstance","file","previewElement","deleteIcon","removeFile","isValid","test","formData","FormData","files","method","result","success","message","cancelFeedback","initSpotPG","placesLayerPG","clusterGroup","markerClusterGroup","disableClusteringAtZoom","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","maxClusterRadius","iconCreateFunction","cluster","divIcon","getChildCount","currentFetchController","fetchDebounceTimer","fetchPlaces","abort","AbortController","signal","nw_lat","nw_lng","se_lat","se_lng","aborted","geoJSON","pointToLayer","canvasIcon","drawIcon","size","clearRect","beginPath","moveTo","arc","PI","lineTo","fillStyle","closePath","onEachFeature","maxHeight","fetchPlacesPG","initSpotHG","placesLayerHG","fetchPlacesHG","initSpotLZ","placesLayerLZ","fetchPlacesLZ","mapInitialized","obstacleClickHandler","obstacleLayer","layerGroup","attribution","fetchObstacles","geoJson","obstacles","coords","polyline","addTo","content","maxAgl","clickedObstacles","obs","zoom","zoomControl","position","awgTerrain","tileLayer","osm","xcontest","mapTilerTerrain","mapboxGL","apiKey","sat","maxZoom","subdomains","opacity","windLayer","oaipMap","airspaceTimeOptions","date","dayName","overlayTree","InfoControl","Logo","logo","opts","locate","drawCircle","keepCurrentZoomLevel","iconLoading","iconElementTag","treeLayersControl","layersControlContainer","getContainer","layersControlToggle","navigator","maxTouchPoints","msMaxTouchPoints","mapReadyEvent","Event","dispatchEvent","initMap","geolocation","getCurrentPosition","userLat","latitude","userLng","longitude","setView","locationReadyEvent","CustomEvent","detail","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","every","key","r","d","definition","defineProperty","enumerable","get","prop","hasOwnProperty","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}